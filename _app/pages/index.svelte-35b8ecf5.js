var mt=Object.defineProperty,pt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Te=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable;var Be=(r,e,s)=>e in r?mt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,ee=(r,e)=>{for(var s in e||(e={}))bt.call(e,s)&&Be(r,s,e[s]);if(Te)for(var s of Te(e))Et.call(e,s)&&Be(r,s,e[s]);return r},_e=(r,e)=>pt(r,yt(e));import{S as ae,i as ie,s as oe,H as Re,e as v,k as U,c as g,a as m,d as c,n as G,b as _,f as P,F as h,I as Je,J as Ue,K as Ge,x as W,u as B,E as ce,G as Q,L as pe,M as qt,N as wt,O as qe,t as te,g as se,P as ye,Q as Dt,R as kt,T as It,U as Vt,V as Ct,W as St,X as At,Y as Ft,Z as Ot,_ as jt,$ as Mt,a0 as Pt,a1 as Wt,a2 as He,l as Ke,j as ue,m as de,o as fe,v as he,a3 as Qe,a4 as be,a5 as Xe,r as we,w as De,a6 as Ee,a7 as Nt,a8 as Ye,h as zt,a9 as Lt,aa as Ze,ab as Tt,ac as $e,ad as Bt}from"../chunks/vendor-a0f61887.js";import{r as Rt}from"../chunks/singletons-12a22614.js";const ke="24h",Ie="production",Jt=r=>({}),xe=r=>({}),Ut=r=>({}),et=r=>({});function Gt(r){let e,s,t,n,l,a;const u=r[1].title,i=Re(u,r,r[0],et),b=r[1].desc,E=Re(b,r,r[0],xe);return{c(){e=v("div"),s=v("div"),t=v("h4"),i&&i.c(),n=U(),l=v("p"),E&&E.c(),this.h()},l(f){e=g(f,"DIV",{class:!0});var p=m(e);s=g(p,"DIV",{class:!0});var y=m(s);t=g(y,"H4",{class:!0});var I=m(t);i&&i.l(I),I.forEach(c),n=G(y),l=g(y,"P",{class:!0});var k=m(l);E&&E.l(k),k.forEach(c),y.forEach(c),p.forEach(c),this.h()},h(){_(t,"class","fr-tile__title"),_(l,"class","rf-tile__desc fr-mt-0 fr-mb-0"),_(s,"class","fr-tile__body"),_(e,"class","fr-tile")},m(f,p){P(f,e,p),h(e,s),h(s,t),i&&i.m(t,null),h(s,n),h(s,l),E&&E.m(l,null),a=!0},p(f,[p]){i&&i.p&&(!a||p&1)&&Je(i,u,f,f[0],a?Ge(u,f[0],p,Ut):Ue(f[0]),et),E&&E.p&&(!a||p&1)&&Je(E,b,f,f[0],a?Ge(b,f[0],p,Jt):Ue(f[0]),xe)},i(f){a||(W(i,f),W(E,f),a=!0)},o(f){B(i,f),B(E,f),a=!1},d(f){f&&c(e),i&&i.d(f),E&&E.d(f)}}}function Ht(r,e,s){let{$$slots:t={},$$scope:n}=e;return r.$$set=l=>{"$$scope"in l&&s(0,n=l.$$scope)},[n,t]}class Kt extends ae{constructor(e){super();ie(this,e,Ht,Gt,oe,{})}}function Qt(r){let e;return{c(){e=v("canvas"),this.h()},l(s){e=g(s,"CANVAS",{style:!0}),m(e).forEach(c),this.h()},h(){ce(e,"height",r[0]||"250px")},m(s,t){P(s,e,t),r[5](e)},p(s,[t]){t&1&&ce(e,"height",s[0]||"250px")},i:Q,o:Q,d(s){s&&c(e),r[5](null)}}}function Xt(r,e,s){let{type:t="line"}=e,{data:n}=e,{height:l}=e,{options:a={}}=e;pe.register(...qt),pe.register(wt),pe.defaults.font.family='"Marianne"';let u,i,b;function E(){b=u.getContext("2d"),i?(i.data=n,i.update()):i=new pe(b,{type:t,data:n,options:a})}function f(p){qe[p?"unshift":"push"](()=>{u=p,s(1,u)})}return r.$$set=p=>{"type"in p&&s(2,t=p.type),"data"in p&&s(3,n=p.data),"height"in p&&s(0,l=p.height),"options"in p&&s(4,a=p.options)},r.$$.update=()=>{r.$$.dirty&8&&n&&E()},[l,u,t,n,a,f]}class Yt extends ae{constructor(e){super();ie(this,e,Xt,Qt,oe,{type:2,data:3,height:0,options:4})}}function tt(r){let e;return{c(){e=te("(pas de requ\xEAte)")},l(s){e=se(s,"(pas de requ\xEAte)")},m(s,t){P(s,e,t)},d(s){s&&c(e)}}}function Zt(r){let e,s=r[0]&&r[0].length===0&&tt();return{c(){e=v("div"),s&&s.c(),this.h()},l(t){e=g(t,"DIV",{id:!0,style:!0,class:!0});var n=m(e);s&&s.l(n),n.forEach(c),this.h()},h(){_(e,"id","wordcloud"),ce(e,"height","100%"),ce(e,"max-height","250px"),ce(e,"display","block"),ce(e,"margin","auto"),_(e,"class","svelte-f0olj7"),ye(e,"inactive",r[1])},m(t,n){P(t,e,n),s&&s.m(e,null)},p(t,[n]){t[0]&&t[0].length===0?s||(s=tt(),s.c(),s.m(e,null)):s&&(s.d(1),s=null),n&2&&ye(e,"inactive",t[1])},i:Q,o:Q,d(t){t&&c(e),s&&s.d()}}}function $t(r,e,s){const t=Dt(),n={schemeCategory10:It,schemeAccent:Vt,schemeDark2:Ct,schemePaired:St,schemePastel1:At,schemePastel2:Ft,schemeSet1:Ot,schemeSet2:jt,schemeSet3:Mt,schemeTableau10:Pt};let{words:l}=e,{height:a=900}=e,{width:u=1600}=e,{font:i='"Marianne"'}=e,{maxFontSize:b=250}=e,{maxWeight:E=800}=e,{scheme:f="schemeTableau10"}=e,{padding:p=4}=e,y=!1,I="";const k=kt(n[f]),O=q=>t("click",q),V=q=>t("mouseover",q),H=q=>t("mouseout",q),N=q=>t("mousemove",q);let K;const w=q=>{He("#wordcloud").append("svg").attr("viewBox",`0 0 ${u} ${a}`).attr("width","100%").attr("height","100%").classed("svg-content-responsive",!0).append("g").attr("transform","translate("+K.size()[0]/2+","+K.size()[1]/2+")").selectAll("text").data(q).enter().append("text").style("font-size",M=>M.size+"px").style("font-weight",M=>M.weight).style("font-family",i).style("fill",(M,R)=>k(R)).attr("text-anchor","middle").attr("transform",M=>"translate("+[M.x,M.y]+")rotate("+M.rotate+")").text(M=>M.text).on("click",O).on("mouseover",V).on("mouseout",H).on("mousemove",N)},j=()=>{if(l.length){s(1,y=!1),K&&He("#wordcloud").select("svg").remove(),s(9,I=JSON.stringify(l));const q=l.sort((F,A)=>A.count-F.count),M=q[0].count,R=b*10/q[0].text.length;K=Wt().size([u,a]).words(q).padding(p).rotate(F=>F.text.length>20?0:~~(Math.random()*2)*90).font(i).fontSize(F=>Math.floor(Math.log(F.count+1)**3/Math.log(M+1)**3*R)).fontWeight(F=>Math.floor(Math.log(F.count+1)**3/Math.log(M+1)**3*E)).on("end",w),K.start()}else s(9,I=JSON.stringify(l)),s(1,y=!0)};return r.$$set=q=>{"words"in q&&s(0,l=q.words),"height"in q&&s(2,a=q.height),"width"in q&&s(3,u=q.width),"font"in q&&s(4,i=q.font),"maxFontSize"in q&&s(5,b=q.maxFontSize),"maxWeight"in q&&s(6,E=q.maxWeight),"scheme"in q&&s(7,f=q.scheme),"padding"in q&&s(8,p=q.padding)},r.$$.update=()=>{r.$$.dirty&513&&l&&JSON.stringify(l)!==I&&j()},[l,y,a,u,i,b,E,f,p,I]}class xt extends ae{constructor(e){super();ie(this,e,$t,Zt,oe,{words:0,height:2,width:3,font:4,maxFontSize:5,maxWeight:6,scheme:7,padding:8})}}function st(r){let e;function s(l,a){return l[1]?ts:es}let t=s(r),n=t(r);return{c(){n.c(),e=Ke()},l(l){n.l(l),e=Ke()},m(l,a){n.m(l,a),P(l,e,a)},p(l,a){t!==(t=s(l))&&(n.d(1),n=t(l),n&&(n.c(),n.m(e.parentNode,e)))},d(l){n.d(l),l&&c(e)}}}function es(r){let e,s,t,n,l;return{c(){e=v("div"),s=v("div"),t=v("div"),n=v("div"),l=v("div"),this.h()},l(a){e=g(a,"DIV",{class:!0});var u=m(e);s=g(u,"DIV",{class:!0}),m(s).forEach(c),t=g(u,"DIV",{class:!0}),m(t).forEach(c),n=g(u,"DIV",{class:!0}),m(n).forEach(c),l=g(u,"DIV",{class:!0}),m(l).forEach(c),u.forEach(c),this.h()},h(){_(s,"class","svelte-a6xc0h"),_(t,"class","svelte-a6xc0h"),_(n,"class","svelte-a6xc0h"),_(l,"class","svelte-a6xc0h"),_(e,"class","lds-ellipsis svelte-a6xc0h")},m(a,u){P(a,e,u),h(e,s),h(e,t),h(e,n),h(e,l)},d(a){a&&c(e)}}}function ts(r){let e,s,t,n,l,a,u,i,b,E,f,p,y,I;return{c(){e=v("div"),s=v("div"),t=v("div"),n=v("div"),l=v("div"),a=v("div"),u=v("div"),i=v("div"),b=v("div"),E=v("div"),f=v("div"),p=v("div"),y=v("div"),I=v("div"),this.h()},l(k){e=g(k,"DIV",{class:!0});var O=m(e);s=g(O,"DIV",{class:!0});var V=m(s);t=g(V,"DIV",{class:!0}),m(t).forEach(c),n=g(V,"DIV",{class:!0}),m(n).forEach(c),l=g(V,"DIV",{class:!0}),m(l).forEach(c),a=g(V,"DIV",{class:!0}),m(a).forEach(c),u=g(V,"DIV",{class:!0}),m(u).forEach(c),i=g(V,"DIV",{class:!0}),m(i).forEach(c),b=g(V,"DIV",{class:!0}),m(b).forEach(c),E=g(V,"DIV",{class:!0}),m(E).forEach(c),f=g(V,"DIV",{class:!0}),m(f).forEach(c),p=g(V,"DIV",{class:!0}),m(p).forEach(c),y=g(V,"DIV",{class:!0}),m(y).forEach(c),I=g(V,"DIV",{class:!0}),m(I).forEach(c),V.forEach(c),O.forEach(c),this.h()},h(){_(t,"class","svelte-a6xc0h"),_(n,"class","svelte-a6xc0h"),_(l,"class","svelte-a6xc0h"),_(a,"class","svelte-a6xc0h"),_(u,"class","svelte-a6xc0h"),_(i,"class","svelte-a6xc0h"),_(b,"class","svelte-a6xc0h"),_(E,"class","svelte-a6xc0h"),_(f,"class","svelte-a6xc0h"),_(p,"class","svelte-a6xc0h"),_(y,"class","svelte-a6xc0h"),_(I,"class","svelte-a6xc0h"),_(s,"class","lds-spinner svelte-a6xc0h"),_(e,"class","load-content svelte-a6xc0h")},m(k,O){P(k,e,O),h(e,s),h(s,t),h(s,n),h(s,l),h(s,a),h(s,u),h(s,i),h(s,b),h(s,E),h(s,f),h(s,p),h(s,y),h(s,I)},d(k){k&&c(e)}}}function ss(r){let e,s=r[0]&&st(r);return{c(){e=v("div"),s&&s.c(),this.h()},l(t){e=g(t,"DIV",{class:!0});var n=m(e);s&&s.l(n),n.forEach(c),this.h()},h(){_(e,"class","svelte-a6xc0h"),ye(e,"fulldiv-container",r[0]&&r[1])},m(t,n){P(t,e,n),s&&s.m(e,null)},p(t,[n]){t[0]?s?s.p(t,n):(s=st(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),n&3&&ye(e,"fulldiv-container",t[0]&&t[1])},i:Q,o:Q,d(t){t&&c(e),s&&s.d()}}}function rs(r,e,s){let{show:t=!1}=e,{fulldiv:n=!0}=e;return r.$$set=l=>{"show"in l&&s(0,t=l.show),"fulldiv"in l&&s(1,n=l.fulldiv)},[t,n]}class rt extends ae{constructor(e){super();ie(this,e,rs,ss,oe,{show:0,fulldiv:1})}}function lt(r,e,s){const t=r.slice();return t[20]=e[s],t[22]=s,t}function nt(r,e,s){const t=r.slice();return t[20]=e[s],t[22]=s,t}function at(r,e,s){const t=r.slice();return t[24]=e[s],t}function it(r,e,s){const t=r.slice();return t[27]=e[s],t}function ot(r){let e,s=r[4][r[27]].label+"",t,n,l;return{c(){e=v("option"),t=te(s),n=U(),this.h()},l(a){e=g(a,"OPTION",{});var u=m(e);t=se(u,s),n=G(u),u.forEach(c),this.h()},h(){e.__value=l=r[27],e.value=e.__value},m(a,u){P(a,e,u),h(e,t),h(e,n)},p:Q,d(a){a&&c(e)}}}function ct(r){let e,s=r[24].slice(0,1).toUpperCase()+r[24].slice(1)+"",t,n,l;return{c(){e=v("option"),t=te(s),n=U(),this.h()},l(a){e=g(a,"OPTION",{});var u=m(e);t=se(u,s),n=G(u),u.forEach(c),this.h()},h(){e.__value=l=r[24],e.value=e.__value},m(a,u){P(a,e,u),h(e,t),h(e,n)},p:Q,d(a){a&&c(e)}}}function ls(r){let e,s;return e=new rt({props:{show:r[3][r[20].query],fulldiv:!1}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,n){fe(e,t,n),s=!0},p(t,n){const l={};n&8&&(l.show=t[3][t[20].query]),e.$set(l)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){he(e,t)}}}function ns(r){let e=(r[20].type==="number"?r[2][r[20].query].data:r[2][r[20].query].data.replace(/(....)-(..)-(..)/,"$3/$2/$1"))+"",s;return{c(){s=te(e)},l(t){s=se(t,e)},m(t,n){P(t,s,n)},p(t,n){n&4&&e!==(e=(t[20].type==="number"?t[2][t[20].query].data:t[2][t[20].query].data.replace(/(....)-(..)-(..)/,"$3/$2/$1"))+"")&&zt(s,e)},i:Q,o:Q,d(t){t&&c(s)}}}function as(r){let e,s,t,n;const l=[ns,ls],a=[];function u(i,b){return i[2][i[20].query]&&!i[3][i[20].query]?0:1}return s=u(r),t=a[s]=l[s](r),{c(){e=v("span"),t.c(),this.h()},l(i){e=g(i,"SPAN",{slot:!0});var b=m(e);t.l(b),b.forEach(c),this.h()},h(){_(e,"slot","title")},m(i,b){P(i,e,b),a[s].m(e,null),n=!0},p(i,b){let E=s;s=u(i),s===E?a[s].p(i,b):(we(),B(a[E],1,1,()=>{a[E]=null}),De(),t=a[s],t?t.p(i,b):(t=a[s]=l[s](i),t.c()),W(t,1),t.m(e,null))},i(i){n||(W(t),n=!0)},o(i){B(t),n=!1},d(i){i&&c(e),a[s].d()}}}function is(r){let e,s=r[7][r[20].query]+"",t;return{c(){e=v("span"),t=te(s),this.h()},l(n){e=g(n,"SPAN",{slot:!0});var l=m(e);t=se(l,s),l.forEach(c),this.h()},h(){_(e,"slot","desc")},m(n,l){P(n,e,l),h(e,t)},p:Q,d(n){n&&c(e)}}}function ut(r){let e,s,t,n;return s=new Kt({props:{$$slots:{desc:[is],title:[as]},$$scope:{ctx:r}}}),{c(){e=v("div"),ue(s.$$.fragment),t=U(),this.h()},l(l){e=g(l,"DIV",{class:!0});var a=m(e);de(s.$$.fragment,a),t=G(a),a.forEach(c),this.h()},h(){_(e,"class","fr-col loader-parent")},m(l,a){P(l,e,a),fe(s,e,null),h(e,t),n=!0},p(l,a){const u={};a&1073741836&&(u.$$scope={dirty:a,ctx:l}),s.$set(u)},i(l){n||(W(s.$$.fragment,l),n=!0)},o(l){B(s.$$.fragment,l),n=!1},d(l){l&&c(e),he(s)}}}function os(r){let e,s;return e=new xt({props:{words:r[2][r[20].query]&&r[9](r[2][r[20].query].data)}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,n){fe(e,t,n),s=!0},p(t,n){const l={};n&4&&(l.words=t[2][t[20].query]&&t[9](t[2][t[20].query].data)),e.$set(l)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){he(e,t)}}}function cs(r){let e,s;return e=new Yt({props:{height:r[20].height,type:r[20].type,data:r[2][r[20].query]&&r[8](r[2][r[20].query].data,r[20].query,r[2][r[20].query].type,r[20].chartType,r[20].fill),options:ee({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:r[7][r[20].query]},legend:{display:r[20].legend}}},r[2][r[20].query]&&r[2][r[20].query].type==="time_series"?_e(ee({},r[10]),{scales:{x:{type:"time"}}}):_e(ee({},r[10]),{indexAxis:r[20].indexAxis||"x"}))}}),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,n){fe(e,t,n),s=!0},p(t,n){const l={};n&4&&(l.data=t[2][t[20].query]&&t[8](t[2][t[20].query].data,t[20].query,t[2][t[20].query].type,t[20].chartType,t[20].fill)),n&4&&(l.options=ee({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:t[7][t[20].query]},legend:{display:t[20].legend}}},t[2][t[20].query]&&t[2][t[20].query].type==="time_series"?_e(ee({},t[10]),{scales:{x:{type:"time"}}}):_e(ee({},t[10]),{indexAxis:t[20].indexAxis||"x"}))),e.$set(l)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){he(e,t)}}}function dt(r){let e,s,t,n,l,a,u;s=new rt({props:{show:r[3][r[20].query]&&r[2][r[20].query]}});const i=[cs,os],b=[];function E(f,p){return f[20].type!=="wordCloud"?0:1}return n=E(r),l=b[n]=i[n](r),{c(){e=v("div"),ue(s.$$.fragment),t=U(),l.c(),a=U(),this.h()},l(f){e=g(f,"DIV",{class:!0});var p=m(e);de(s.$$.fragment,p),t=G(p),l.l(p),a=G(p),p.forEach(c),this.h()},h(){_(e,"class","fr-col-12 fr-col-md-6 loader-parent")},m(f,p){P(f,e,p),fe(s,e,null),h(e,t),b[n].m(e,null),h(e,a),u=!0},p(f,p){const y={};p&12&&(y.show=f[3][f[20].query]&&f[2][f[20].query]),s.$set(y),l.p(f,p)},i(f){u||(W(s.$$.fragment,f),W(l),u=!0)},o(f){B(s.$$.fragment,f),B(l),u=!1},d(f){f&&c(e),he(s),b[n].d()}}}function us(r){let e,s,t,n,l,a,u,i,b,E,f,p,y,I,k,O,V,H,N,K,w,j,q,M,R,F,A,Z,X,Y,re=Object.keys(r[4]),z=[];for(let d=0;d<re.length;d+=1)z[d]=ot(it(r,re,d));let le=r[5],L=[];for(let d=0;d<le.length;d+=1)L[d]=ct(at(r,le,d));let $=r[6].filter(ft),C=[];for(let d=0;d<$.length;d+=1)C[d]=ut(nt(r,$,d));const vt=d=>B(C[d],1,1,()=>{C[d]=null});let x=r[6].filter(ht),S=[];for(let d=0;d<x.length;d+=1)S[d]=dt(lt(r,x,d));const gt=d=>B(S[d],1,1,()=>{S[d]=null});return{c(){e=v("div"),s=v("div"),t=v("div"),n=v("div"),l=v("div"),a=v("div"),u=v("div"),i=v("div"),b=v("div"),E=v("label"),f=te("Plage de dates"),p=U(),y=v("select");for(let d=0;d<z.length;d+=1)z[d].c();I=U(),k=v("div"),O=v("label"),V=te("Environnement"),H=U(),N=v("select");for(let d=0;d<L.length;d+=1)L[d].c();K=U(),w=v("div"),j=v("div"),q=v("div");for(let d=0;d<C.length;d+=1)C[d].c();M=U(),R=v("div"),F=v("div"),A=v("div");for(let d=0;d<S.length;d+=1)S[d].c();this.h()},l(d){e=g(d,"DIV",{class:!0});var D=m(e);s=g(D,"DIV",{class:!0});var o=m(s);t=g(o,"DIV",{class:!0});var J=m(t);n=g(J,"DIV",{class:!0});var Ve=m(n);l=g(Ve,"DIV",{class:!0});var ne=m(l);a=g(ne,"DIV",{class:!0});var Ce=m(a);u=g(Ce,"DIV",{class:!0});var Se=m(u);i=g(Se,"DIV",{class:!0});var ve=m(i);b=g(ve,"DIV",{class:!0});var ge=m(b);E=g(ge,"LABEL",{class:!0,for:!0});var Ae=m(E);f=se(Ae,"Plage de dates"),Ae.forEach(c),p=G(ge),y=g(ge,"SELECT",{id:!0,class:!0});var Fe=m(y);for(let T=0;T<z.length;T+=1)z[T].l(Fe);Fe.forEach(c),ge.forEach(c),I=G(ve),k=g(ve,"DIV",{class:!0});var me=m(k);O=g(me,"LABEL",{class:!0,for:!0});var Oe=m(O);V=se(Oe,"Environnement"),Oe.forEach(c),H=G(me),N=g(me,"SELECT",{id:!0,class:!0});var je=m(N);for(let T=0;T<L.length;T+=1)L[T].l(je);je.forEach(c),me.forEach(c),ve.forEach(c),Se.forEach(c),Ce.forEach(c),K=G(ne),w=g(ne,"DIV",{class:!0});var Me=m(w);j=g(Me,"DIV",{class:!0});var Pe=m(j);q=g(Pe,"DIV",{class:!0});var We=m(q);for(let T=0;T<C.length;T+=1)C[T].l(We);We.forEach(c),Pe.forEach(c),Me.forEach(c),M=G(ne),R=g(ne,"DIV",{class:!0});var Ne=m(R);F=g(Ne,"DIV",{class:!0});var ze=m(F);A=g(ze,"DIV",{class:!0});var Le=m(A);for(let T=0;T<S.length;T+=1)S[T].l(Le);Le.forEach(c),ze.forEach(c),Ne.forEach(c),ne.forEach(c),Ve.forEach(c),J.forEach(c),o.forEach(c),D.forEach(c),this.h()},h(){_(E,"class","fr-label"),_(E,"for","date"),_(y,"id","date"),_(y,"class","fr-select"),r[0]===void 0&&Qe(()=>r[11].call(y)),_(b,"class","fr-col-6"),_(O,"class","fr-label"),_(O,"for","env"),_(N,"id","env"),_(N,"class","fr-select"),r[1]===void 0&&Qe(()=>r[12].call(N)),_(k,"class","fr-col-6"),_(i,"class","fr-grid-row fr-grid-row--gutters"),_(u,"class","fr-container fr-container--fluid"),_(a,"class","fr-col-12"),_(q,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),_(j,"class","fr-container fr-container--fluid"),_(w,"class","fr-col-12"),_(A,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),_(F,"class","fr-container fr-container--fluid"),_(R,"class","fr-col-12"),_(l,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),_(n,"class","fr-container fr-container--fluid"),_(t,"class","fr-col-12"),_(s,"class","fr-grid-row fr-grid-row--gutters"),_(e,"class","fr-container fr-container--fluid")},m(d,D){P(d,e,D),h(e,s),h(s,t),h(t,n),h(n,l),h(l,a),h(a,u),h(u,i),h(i,b),h(b,E),h(E,f),h(b,p),h(b,y);for(let o=0;o<z.length;o+=1)z[o].m(y,null);be(y,r[0]),h(i,I),h(i,k),h(k,O),h(O,V),h(k,H),h(k,N);for(let o=0;o<L.length;o+=1)L[o].m(N,null);be(N,r[1]),h(l,K),h(l,w),h(w,j),h(j,q);for(let o=0;o<C.length;o+=1)C[o].m(q,null);h(l,M),h(l,R),h(R,F),h(F,A);for(let o=0;o<S.length;o+=1)S[o].m(A,null);Z=!0,X||(Y=[Xe(y,"change",r[11]),Xe(N,"change",r[12])],X=!0)},p(d,[D]){if(D&16){re=Object.keys(d[4]);let o;for(o=0;o<re.length;o+=1){const J=it(d,re,o);z[o]?z[o].p(J,D):(z[o]=ot(J),z[o].c(),z[o].m(y,null))}for(;o<z.length;o+=1)z[o].d(1);z.length=re.length}if(D&17&&be(y,d[0]),D&32){le=d[5];let o;for(o=0;o<le.length;o+=1){const J=at(d,le,o);L[o]?L[o].p(J,D):(L[o]=ct(J),L[o].c(),L[o].m(N,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=le.length}if(D&34&&be(N,d[1]),D&204){$=d[6].filter(ft);let o;for(o=0;o<$.length;o+=1){const J=nt(d,$,o);C[o]?(C[o].p(J,D),W(C[o],1)):(C[o]=ut(J),C[o].c(),W(C[o],1),C[o].m(q,null))}for(we(),o=$.length;o<C.length;o+=1)vt(o);De()}if(D&1996){x=d[6].filter(ht);let o;for(o=0;o<x.length;o+=1){const J=lt(d,x,o);S[o]?(S[o].p(J,D),W(S[o],1)):(S[o]=dt(J),S[o].c(),W(S[o],1),S[o].m(A,null))}for(we(),o=x.length;o<S.length;o+=1)gt(o);De()}},i(d){if(!Z){for(let D=0;D<$.length;D+=1)W(C[D]);for(let D=0;D<x.length;D+=1)W(S[D]);Z=!0}},o(d){C=C.filter(Boolean);for(let D=0;D<C.length;D+=1)B(C[D]);S=S.filter(Boolean);for(let D=0;D<S.length;D+=1)B(S[D]);Z=!1},d(d){d&&c(e),Ee(z,d),Ee(L,d),Ee(C,d),Ee(S,d),X=!1,Nt(Y)}}}let ds=50;const ft=r=>["number","date"].includes(r.type),ht=r=>!["number","date"].includes(r.type);function fs(r,e,s){const t={"24h":{label:"Dernier jour",start:"now-1d",end:"now",step:"1h"},"7j":{label:"Derni\xE8re semaine",start:"now-7d",end:"now",step:"4h"},"30j":{label:"Dernier mois",start:"now-30d",end:"now",step:"1d"},j0:{label:"Depuis le d\xE9but",start:"2021-10-01",end:"now",step:"1d"}},n=["production","secours","recette"];let{since:l=ke}=e,{env:a=Ie}=e;const u=[{query:"total_docs",type:"number"},{query:"last_decision_date",type:"date"},{query:"api_requests_number",type:"number"},{query:"decision_uniq_number",type:"number"},{query:"pods_number",type:"number"},{query:"api_requests_date_histogram",type:"line",legend:!0},{query:"top_words",type:"wordCloud",height:"400px",col:12,legend:!1},{query:"requests_ip_source",type:"pie",legend:!0},{query:"piste",type:"bar",legend:!1},{query:"errors_histogram",type:"bar",indexAxis:"y",legend:!1},{query:"latencty_date_histogram",type:"line",fill:!0,legend:!0},{query:"cpu_date_histogram",type:"line",fill:!0,legend:!0},{query:"mem_date_histogram",type:"line",fill:!0,legend:!0},{query:"bandwidth_date_histogram",type:"line",legend:!1}],i={total_docs:"D\xE9cisions index\xE9es",last_decision_date:"Date de la derni\xE8re d\xE9cision",api_requests_number:"Appels API",api_requests_date_histogram:"Requ\xEAtes",decision_uniq_number:"D\xE9cisions consult\xE9es",errors_histogram:"Erreurs http",requests_ip_source:"Canal d'appel",piste:"Utilisateurs Piste",latencty_date_histogram:"Latence",cpu_date_histogram:"CPU %",mem_date_histogram:"M\xE9moire",bandwidth_date_histogram:"R\xE9seau (octets)",top_words:"Recherches",pods_number:"Conteneurs"};let b={},E={};const f=()=>{u.forEach(w=>{s(3,E[w.query]=!0,E),fetch(new Request(`https://monitor.judilibre.io/stats?query=${w.query}&date_start=${t[l].start}&date_end=${t[l].end}&date_interval=${t[l].step}&env=${a}&size=${ds}`,{method:"GET",referer:"https://stats.judilibre.io",mode:"cors"})).then(j=>{if(j.ok)return j.json().then(q=>{s(2,b[w.query]=q[w.query],b),s(3,E[w.query]=!1,E)})})})},p=(w,j,q,M,R)=>{if(q==="time_series"){let F=0,A={};return w.forEach(X=>{Object.keys(X).forEach(Y=>{Y!=="date"&&(A[Y]=!0)})}),A=Object.keys(A),A.includes("Mem.total")&&(A=["Mem.used.min","Mem.used.mean","Mem.used.max","Mem.total"]),{datasets:A.map(X=>({data:w.map(Y=>{if(Y[X])return{x:new Date(Y.date),y:Y[X]}}),label:X,borderColor:H[F++],borderWidth:R?0:void 0,fill:R?"origin":void 0,backgroundColor:R?`#000091${9-2*F}${9-2*F}`:void 0}))}}else{let F=Object.keys(w).sort((A,Z)=>w[Z]-w[A]);return{datasets:[{data:F.map(A=>w[A]),backgroundColor:H,borderWidth:0,label:i[j]}],labels:F.map(A=>k(A))}}},y=w=>Object.keys(w).filter(j=>j.length>1&&j!=="chien").map(j=>({text:j,count:w[j]})),I={"80.87.226.10":"courdecassation.fr","185.24.185.49":"piste.gouv.fr"},k=w=>I[w]||w,O={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},interaction:{mode:"index"},hover:{intersect:!1},elements:{point:{radius:0},line:{tension:.15}}},V={"F-blue-soft":"#5770BE","N-orange-dark":"#E18863","E-green-soft":"#00AC8C","L-yellow-dark":"#FDCF41","Q-brown":"#A26859","J-pink-light":"#FFC29E","$blue-france":"#000091","$red-marianne":"#E1000F","A-green-warm":"#958B62","B-green-light":"#91AE4F","C-green-warm":"#169B62","G-blue-dark":"#484D7A","H-pink-soft":"#FF8D7E","I-pink-dark":"#D08A77","K-yellow-medium":"#FFE800","M-orange-medium":"#FF9940","O-orange-soft":"#FF6F4C","P-purple":"#7D4E5B"},H=Object.keys(V).map(w=>V[w]);function N(){l=Ye(this),s(0,l),s(4,t)}function K(){a=Ye(this),s(1,a),s(5,n)}return r.$$set=w=>{"since"in w&&s(0,l=w.since),"env"in w&&s(1,a=w.env)},r.$$.update=()=>{r.$$.dirty&3&&(l||a)&&f()},[l,a,b,E,t,n,u,i,p,y,O,N,K]}class hs extends ae{constructor(e){super();ie(this,e,fs,us,oe,{since:0,env:1})}}const _s=Rt,_t=vs;async function vs(r,e){return _s.goto(r,e,[])}const gs=()=>{const r=Lt("__svelte__");return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:r.navigating.subscribe}},session:r.session}},ms={subscribe(r){return gs().page.subscribe(r)}};function ps(r){let e,s,t,n,l,a,u,i,b;function E(y){r[3](y)}function f(y){r[4](y)}let p={};return r[0]!==void 0&&(p.since=r[0]),r[1]!==void 0&&(p.env=r[1]),a=new hs({props:p}),qe.push(()=>Ze(a,"since",E)),qe.push(()=>Ze(a,"env",f)),{c(){e=U(),s=v("section"),t=v("div"),n=v("div"),l=v("div"),ue(a.$$.fragment),this.h()},l(y){Tt('[data-svelte="svelte-9qr2em"]',document.head).forEach(c),e=G(y),s=g(y,"SECTION",{});var k=m(s);t=g(k,"DIV",{class:!0});var O=m(t);n=g(O,"DIV",{class:!0});var V=m(n);l=g(V,"DIV",{class:!0});var H=m(l);de(a.$$.fragment,H),H.forEach(c),V.forEach(c),O.forEach(c),k.forEach(c),this.h()},h(){document.title="API Judilibre - statistiques",_(l,"class","fr-col-12 fr-mt-2w"),_(n,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),_(t,"class","fr-container")},m(y,I){P(y,e,I),P(y,s,I),h(s,t),h(t,n),h(n,l),fe(a,l,null),b=!0},p(y,[I]){const k={};!u&&I&1&&(u=!0,k.since=y[0],$e(()=>u=!1)),!i&&I&2&&(i=!0,k.env=y[1],$e(()=>i=!1)),a.$set(k)},i(y){b||(W(a.$$.fragment,y),b=!0)},o(y){B(a.$$.fragment,y),b=!1},d(y){y&&c(e),y&&c(s),he(a)}}}const ws=!1;async function Ds({page:r}){const e={};return e.since=r.query.get("since")||ke,e.env=r.query.get("env")||Ie,{props:e}}function ys(r,e,s){let t;Bt(r,ms,i=>s(2,t=i));let{since:n}=e,{env:l}=e;function a(i){n=i,s(0,n)}function u(i){l=i,s(1,l)}return r.$$set=i=>{"since"in i&&s(0,n=i.since),"env"in i&&s(1,l=i.env)},r.$$.update=()=>{r.$$.dirty&5&&n&&(n!==ke?t.query.set("since",n):t.query.delete("since"),_t(t.query.toString()?`${t.path}?${t.query.toString()}`:`${t.path}`)),r.$$.dirty&6&&l&&(l!==Ie?t.query.set("env",l):t.query.delete("env"),_t(t.query.toString()?`${t.path}?${t.query.toString()}`:`${t.path}`))},[n,l,t,a,u]}class ks extends ae{constructor(e){super();ie(this,e,ys,ps,oe,{since:0,env:1})}}export{ks as default,Ds as load,ws as prerender};

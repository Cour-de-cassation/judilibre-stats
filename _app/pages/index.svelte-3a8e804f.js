var ut=Object.defineProperty,ft=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var Le=(r,e,t)=>e in r?ut(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ee=(r,e)=>{for(var t in e||(e={}))_t.call(e,t)&&Le(r,t,e[t]);if(je)for(var t of je(e))mt.call(e,t)&&Le(r,t,e[t]);return r},_e=(r,e)=>ft(r,ht(e));import{S as ne,i as oe,s as ie,H as Ne,e as g,k as G,c as v,a as p,d,n as H,b as m,f as T,F as h,I as Te,J as Be,K as Re,x as P,u as B,E as ce,G as U,L as pe,M as gt,N as vt,O as pt,t as te,g as se,P as ye,Q as yt,R as bt,T as Et,U as wt,V as qt,W as Dt,X as It,Y as kt,Z as Vt,_ as Ct,$ as zt,a0 as St,a1 as At,a2 as Je,j as de,m as ue,o as fe,v as he,r as we,w as qe,a3 as Ge,a4 as be,a5 as He,a6 as Ee,a7 as Ft,h as Ot,a8 as Ke,a9 as Pt}from"../chunks/vendor-bd6a732b.js";const Mt=r=>({}),Ue=r=>({}),Wt=r=>({}),Qe=r=>({});function jt(r){let e,t,s,l,a,n;const i=r[1].title,c=Ne(i,r,r[0],Qe),E=r[1].desc,y=Ne(E,r,r[0],Ue);return{c(){e=g("div"),t=g("div"),s=g("h4"),c&&c.c(),l=G(),a=g("p"),y&&y.c(),this.h()},l(f){e=v(f,"DIV",{class:!0});var _=p(e);t=v(_,"DIV",{class:!0});var w=p(t);s=v(w,"H4",{class:!0});var A=p(s);c&&c.l(A),A.forEach(d),l=H(w),a=v(w,"P",{class:!0});var z=p(a);y&&y.l(z),z.forEach(d),w.forEach(d),_.forEach(d),this.h()},h(){m(s,"class","fr-tile__title"),m(a,"class","rf-tile__desc fr-mt-0 fr-mb-0"),m(t,"class","fr-tile__body"),m(e,"class","fr-tile")},m(f,_){T(f,e,_),h(e,t),h(t,s),c&&c.m(s,null),h(t,l),h(t,a),y&&y.m(a,null),n=!0},p(f,[_]){c&&c.p&&(!n||_&1)&&Te(c,i,f,f[0],n?Re(i,f[0],_,Wt):Be(f[0]),Qe),y&&y.p&&(!n||_&1)&&Te(y,E,f,f[0],n?Re(E,f[0],_,Mt):Be(f[0]),Ue)},i(f){n||(P(c,f),P(y,f),n=!0)},o(f){B(c,f),B(y,f),n=!1},d(f){f&&d(e),c&&c.d(f),y&&y.d(f)}}}function Lt(r,e,t){let{$$slots:s={},$$scope:l}=e;return r.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class Nt extends ne{constructor(e){super();oe(this,e,Lt,jt,ie,{})}}function Tt(r){let e;return{c(){e=g("canvas"),this.h()},l(t){e=v(t,"CANVAS",{style:!0}),p(e).forEach(d),this.h()},h(){ce(e,"height",r[0]||"250px")},m(t,s){T(t,e,s),r[5](e)},p(t,[s]){s&1&&ce(e,"height",t[0]||"250px")},i:U,o:U,d(t){t&&d(e),r[5](null)}}}function Bt(r,e,t){let{type:s="line"}=e,{data:l}=e,{height:a}=e,{options:n={}}=e;pe.register(...gt),pe.register(vt),pe.defaults.font.family='"Marianne"';let i,c,E;function y(){E=i.getContext("2d"),c?(c.data=l,c.update()):c=new pe(E,{type:s,data:l,options:n})}function f(_){pt[_?"unshift":"push"](()=>{i=_,t(1,i)})}return r.$$set=_=>{"type"in _&&t(2,s=_.type),"data"in _&&t(3,l=_.data),"height"in _&&t(0,a=_.height),"options"in _&&t(4,n=_.options)},r.$$.update=()=>{r.$$.dirty&8&&l&&y()},[a,i,s,l,n,f]}class Rt extends ne{constructor(e){super();oe(this,e,Bt,Tt,ie,{type:2,data:3,height:0,options:4})}}function Xe(r){let e;return{c(){e=te("(pas de requ\xEAte)")},l(t){e=se(t,"(pas de requ\xEAte)")},m(t,s){T(t,e,s)},d(t){t&&d(e)}}}function Jt(r){let e,t=r[0]&&r[0].length===0&&Xe();return{c(){e=g("div"),t&&t.c(),this.h()},l(s){e=v(s,"DIV",{id:!0,style:!0,class:!0});var l=p(e);t&&t.l(l),l.forEach(d),this.h()},h(){m(e,"id","wordcloud"),ce(e,"height","100%"),ce(e,"max-height","250px"),ce(e,"display","block"),ce(e,"margin","auto"),m(e,"class","svelte-f0olj7"),ye(e,"inactive",r[1])},m(s,l){T(s,e,l),t&&t.m(e,null)},p(s,[l]){s[0]&&s[0].length===0?t||(t=Xe(),t.c(),t.m(e,null)):t&&(t.d(1),t=null),l&2&&ye(e,"inactive",s[1])},i:U,o:U,d(s){s&&d(e),t&&t.d()}}}function Gt(r,e,t){const s=yt(),l={schemeCategory10:Et,schemeAccent:wt,schemeDark2:qt,schemePaired:Dt,schemePastel1:It,schemePastel2:kt,schemeSet1:Vt,schemeSet2:Ct,schemeSet3:zt,schemeTableau10:St};let{words:a}=e,{height:n=900}=e,{width:i=1600}=e,{font:c='"Marianne"'}=e,{maxFontSize:E=250}=e,{maxWeight:y=800}=e,{scheme:f="schemeTableau10"}=e,{padding:_=4}=e,w=!1,A="";const z=bt(l[f]),M=b=>s("click",b),V=b=>s("mouseover",b),Y=b=>s("mouseout",b),W=b=>s("mousemove",b);let K;const D=b=>{Je("#wordcloud").append("svg").attr("viewBox",`0 0 ${i} ${n}`).attr("width","100%").attr("height","100%").classed("svg-content-responsive",!0).append("g").attr("transform","translate("+K.size()[0]/2+","+K.size()[1]/2+")").selectAll("text").data(b).enter().append("text").style("font-size",O=>O.size+"px").style("font-weight",O=>O.weight).style("font-family",c).style("fill",(O,R)=>z(R)).attr("text-anchor","middle").attr("transform",O=>"translate("+[O.x,O.y]+")rotate("+O.rotate+")").text(O=>O.text).on("click",M).on("mouseover",V).on("mouseout",Y).on("mousemove",W)},F=()=>{if(a.length){t(1,w=!1),K&&Je("#wordcloud").select("svg").remove(),t(9,A=JSON.stringify(a));const b=a.sort((S,C)=>C.count-S.count),O=b[0].count,R=E*10/b[0].text.length;K=At().size([i,n]).words(b).padding(_).rotate(S=>S.text.length>20?0:~~(Math.random()*2)*90).font(c).fontSize(S=>Math.floor(Math.log(S.count+1)**1.5/Math.log(O+1)**1.5*R)).fontWeight(S=>Math.floor(S.count/O*y)).on("end",D),K.start()}else t(9,A=JSON.stringify(a)),t(1,w=!0)};return r.$$set=b=>{"words"in b&&t(0,a=b.words),"height"in b&&t(2,n=b.height),"width"in b&&t(3,i=b.width),"font"in b&&t(4,c=b.font),"maxFontSize"in b&&t(5,E=b.maxFontSize),"maxWeight"in b&&t(6,y=b.maxWeight),"scheme"in b&&t(7,f=b.scheme),"padding"in b&&t(8,_=b.padding)},r.$$.update=()=>{r.$$.dirty&513&&a&&JSON.stringify(a)!==A&&F()},[a,w,n,i,c,E,y,f,_,A]}class Ht extends ne{constructor(e){super();oe(this,e,Gt,Jt,ie,{words:0,height:2,width:3,font:4,maxFontSize:5,maxWeight:6,scheme:7,padding:8})}}function Ye(r){let e,t,s,l,a,n,i,c,E,y,f,_,w,A;return{c(){e=g("div"),t=g("div"),s=g("div"),l=g("div"),a=g("div"),n=g("div"),i=g("div"),c=g("div"),E=g("div"),y=g("div"),f=g("div"),_=g("div"),w=g("div"),A=g("div"),this.h()},l(z){e=v(z,"DIV",{class:!0});var M=p(e);t=v(M,"DIV",{class:!0});var V=p(t);s=v(V,"DIV",{class:!0}),p(s).forEach(d),l=v(V,"DIV",{class:!0}),p(l).forEach(d),a=v(V,"DIV",{class:!0}),p(a).forEach(d),n=v(V,"DIV",{class:!0}),p(n).forEach(d),i=v(V,"DIV",{class:!0}),p(i).forEach(d),c=v(V,"DIV",{class:!0}),p(c).forEach(d),E=v(V,"DIV",{class:!0}),p(E).forEach(d),y=v(V,"DIV",{class:!0}),p(y).forEach(d),f=v(V,"DIV",{class:!0}),p(f).forEach(d),_=v(V,"DIV",{class:!0}),p(_).forEach(d),w=v(V,"DIV",{class:!0}),p(w).forEach(d),A=v(V,"DIV",{class:!0}),p(A).forEach(d),V.forEach(d),M.forEach(d),this.h()},h(){m(s,"class","svelte-zmyo9f"),m(l,"class","svelte-zmyo9f"),m(a,"class","svelte-zmyo9f"),m(n,"class","svelte-zmyo9f"),m(i,"class","svelte-zmyo9f"),m(c,"class","svelte-zmyo9f"),m(E,"class","svelte-zmyo9f"),m(y,"class","svelte-zmyo9f"),m(f,"class","svelte-zmyo9f"),m(_,"class","svelte-zmyo9f"),m(w,"class","svelte-zmyo9f"),m(A,"class","svelte-zmyo9f"),m(t,"class","lds-spinner svelte-zmyo9f"),m(e,"class","load-content svelte-zmyo9f")},m(z,M){T(z,e,M),h(e,t),h(t,s),h(t,l),h(t,a),h(t,n),h(t,i),h(t,c),h(t,E),h(t,y),h(t,f),h(t,_),h(t,w),h(t,A)},d(z){z&&d(e)}}}function Kt(r){let e,t=r[0]&&Ye();return{c(){e=g("div"),t&&t.c(),this.h()},l(s){e=v(s,"DIV",{class:!0});var l=p(e);t&&t.l(l),l.forEach(d),this.h()},h(){m(e,"class","svelte-zmyo9f"),ye(e,"load-container",r[0])},m(s,l){T(s,e,l),t&&t.m(e,null)},p(s,[l]){s[0]?t||(t=Ye(),t.c(),t.m(e,null)):t&&(t.d(1),t=null),l&1&&ye(e,"load-container",s[0])},i:U,o:U,d(s){s&&d(e),t&&t.d()}}}function Ut(r,e,t){let{show:s=!1}=e;return r.$$set=l=>{"show"in l&&t(0,s=l.show)},[s]}class Ze extends ne{constructor(e){super();oe(this,e,Ut,Kt,ie,{show:0})}}function $e(r,e,t){const s=r.slice();return s[20]=e[t],s[22]=t,s}function xe(r,e,t){const s=r.slice();return s[20]=e[t],s[22]=t,s}function et(r,e,t){const s=r.slice();return s[24]=e[t],s}function tt(r,e,t){const s=r.slice();return s[27]=e[t],s}function st(r){let e,t=r[27].label+"",s,l,a;return{c(){e=g("option"),s=te(t),l=G(),this.h()},l(n){e=v(n,"OPTION",{});var i=p(e);s=se(i,t),l=H(i),i.forEach(d),this.h()},h(){e.__value=a=r[27],e.value=e.__value},m(n,i){T(n,e,i),h(e,s),h(e,l)},p:U,d(n){n&&d(e)}}}function rt(r){let e,t=r[24].label+"",s,l,a;return{c(){e=g("option"),s=te(t),l=G(),this.h()},l(n){e=v(n,"OPTION",{});var i=p(e);s=se(i,t),l=H(i),i.forEach(d),this.h()},h(){e.__value=a=r[24],e.value=e.__value},m(n,i){T(n,e,i),h(e,s),h(e,l)},p:U,d(n){n&&d(e)}}}function lt(r){let e,t;return e=new Nt({props:{$$slots:{desc:[Xt],title:[Qt]},$$scope:{ctx:r}}}),{c(){de(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),t=!0},p(s,l){const a={};l&1073741828&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function Qt(r){let e,t=(r[20].type==="number"?r[2][r[20].query].data:r[2][r[20].query].data.replace(/(....)-(..)-(..)/,"$3/$2/$1"))+"",s;return{c(){e=g("span"),s=te(t),this.h()},l(l){e=v(l,"SPAN",{slot:!0});var a=p(e);s=se(a,t),a.forEach(d),this.h()},h(){m(e,"slot","title")},m(l,a){T(l,e,a),h(e,s)},p(l,a){a&4&&t!==(t=(l[20].type==="number"?l[2][l[20].query].data:l[2][l[20].query].data.replace(/(....)-(..)-(..)/,"$3/$2/$1"))+"")&&Ot(s,t)},d(l){l&&d(e)}}}function Xt(r){let e,t=r[5][r[20].query]+"",s;return{c(){e=g("span"),s=te(t),this.h()},l(l){e=v(l,"SPAN",{slot:!0});var a=p(e);s=se(a,t),a.forEach(d),this.h()},h(){m(e,"slot","desc")},m(l,a){T(l,e,a),h(e,s)},p:U,d(l){l&&d(e)}}}function at(r){let e,t,s,l,a;t=new Ze({props:{show:r[3][r[20].query]&&r[2][r[20].query]}});let n=r[2][r[20].query]&&lt(r);return{c(){e=g("div"),de(t.$$.fragment),s=G(),n&&n.c(),l=G(),this.h()},l(i){e=v(i,"DIV",{class:!0});var c=p(e);ue(t.$$.fragment,c),s=H(c),n&&n.l(c),l=H(c),c.forEach(d),this.h()},h(){m(e,"class","fr-col loader-parent")},m(i,c){T(i,e,c),fe(t,e,null),h(e,s),n&&n.m(e,null),h(e,l),a=!0},p(i,c){const E={};c&12&&(E.show=i[3][i[20].query]&&i[2][i[20].query]),t.$set(E),i[2][i[20].query]?n?(n.p(i,c),c&4&&P(n,1)):(n=lt(i),n.c(),P(n,1),n.m(e,l)):n&&(we(),B(n,1,1,()=>{n=null}),qe())},i(i){a||(P(t.$$.fragment,i),P(n),a=!0)},o(i){B(t.$$.fragment,i),B(n),a=!1},d(i){i&&d(e),he(t),n&&n.d()}}}function Yt(r){let e,t;return e=new Ht({props:{words:r[2][r[20].query]&&r[9](r[2][r[20].query].data)}}),{c(){de(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),t=!0},p(s,l){const a={};l&4&&(a.words=s[2][s[20].query]&&s[9](s[2][s[20].query].data)),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function Zt(r){let e,t;return e=new Rt({props:{height:r[20].height,type:r[20].type,data:r[2][r[20].query]&&r[8](r[2][r[20].query].data,r[20].query,r[2][r[20].query].type,r[20].chartType,r[20].fill),options:ee({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:r[5][r[20].query]},legend:{display:r[20].legend}}},r[2][r[20].query]&&r[2][r[20].query].type==="time_series"?_e(ee({},r[10]),{scales:{x:{type:"time"}}}):_e(ee({},r[10]),{indexAxis:r[20].indexAxis||"x"}))}}),{c(){de(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),t=!0},p(s,l){const a={};l&4&&(a.data=s[2][s[20].query]&&s[8](s[2][s[20].query].data,s[20].query,s[2][s[20].query].type,s[20].chartType,s[20].fill)),l&4&&(a.options=ee({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:s[5][s[20].query]},legend:{display:s[20].legend}}},s[2][s[20].query]&&s[2][s[20].query].type==="time_series"?_e(ee({},s[10]),{scales:{x:{type:"time"}}}):_e(ee({},s[10]),{indexAxis:s[20].indexAxis||"x"}))),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function nt(r){let e,t,s,l,a,n,i;t=new Ze({props:{show:r[3][r[20].query]&&r[2][r[20].query]}});const c=[Zt,Yt],E=[];function y(f,_){return f[20].type!=="wordCloud"?0:1}return l=y(r),a=E[l]=c[l](r),{c(){e=g("div"),de(t.$$.fragment),s=G(),a.c(),n=G(),this.h()},l(f){e=v(f,"DIV",{class:!0});var _=p(e);ue(t.$$.fragment,_),s=H(_),a.l(_),n=H(_),_.forEach(d),this.h()},h(){m(e,"class","fr-col-12 fr-col-md-6 loader-parent")},m(f,_){T(f,e,_),fe(t,e,null),h(e,s),E[l].m(e,null),h(e,n),i=!0},p(f,_){const w={};_&12&&(w.show=f[3][f[20].query]&&f[2][f[20].query]),t.$set(w),a.p(f,_)},i(f){i||(P(t.$$.fragment,f),P(a),i=!0)},o(f){B(t.$$.fragment,f),B(a),i=!1},d(f){f&&d(e),he(t),E[l].d()}}}function $t(r){let e,t,s,l,a,n,i,c,E,y,f,_,w,A,z,M,V,Y,W,K,D,F,b,O,R,S,C,Z,Q,X,re=r[6],j=[];for(let u=0;u<re.length;u+=1)j[u]=st(tt(r,re,u));let le=r[7],L=[];for(let u=0;u<le.length;u+=1)L[u]=rt(et(r,le,u));let $=r[4].filter(ot),I=[];for(let u=0;u<$.length;u+=1)I[u]=at(xe(r,$,u));const ct=u=>B(I[u],1,1,()=>{I[u]=null});let x=r[4].filter(it),k=[];for(let u=0;u<x.length;u+=1)k[u]=nt($e(r,x,u));const dt=u=>B(k[u],1,1,()=>{k[u]=null});return{c(){e=g("div"),t=g("div"),s=g("div"),l=g("div"),a=g("div"),n=g("div"),i=g("div"),c=g("div"),E=g("div"),y=g("label"),f=te("Plage de dates"),_=G(),w=g("select");for(let u=0;u<j.length;u+=1)j[u].c();A=G(),z=g("div"),M=g("label"),V=te("Environnement"),Y=G(),W=g("select");for(let u=0;u<L.length;u+=1)L[u].c();K=G(),D=g("div"),F=g("div"),b=g("div");for(let u=0;u<I.length;u+=1)I[u].c();O=G(),R=g("div"),S=g("div"),C=g("div");for(let u=0;u<k.length;u+=1)k[u].c();this.h()},l(u){e=v(u,"DIV",{class:!0});var q=p(e);t=v(q,"DIV",{class:!0});var o=p(t);s=v(o,"DIV",{class:!0});var J=p(s);l=v(J,"DIV",{class:!0});var De=p(l);a=v(De,"DIV",{class:!0});var ae=p(a);n=v(ae,"DIV",{class:!0});var Ie=p(n);i=v(Ie,"DIV",{class:!0});var ke=p(i);c=v(ke,"DIV",{class:!0});var me=p(c);E=v(me,"DIV",{class:!0});var ge=p(E);y=v(ge,"LABEL",{class:!0,for:!0});var Ve=p(y);f=se(Ve,"Plage de dates"),Ve.forEach(d),_=H(ge),w=v(ge,"SELECT",{id:!0,class:!0});var Ce=p(w);for(let N=0;N<j.length;N+=1)j[N].l(Ce);Ce.forEach(d),ge.forEach(d),A=H(me),z=v(me,"DIV",{class:!0});var ve=p(z);M=v(ve,"LABEL",{class:!0,for:!0});var ze=p(M);V=se(ze,"Environnement"),ze.forEach(d),Y=H(ve),W=v(ve,"SELECT",{id:!0,class:!0});var Se=p(W);for(let N=0;N<L.length;N+=1)L[N].l(Se);Se.forEach(d),ve.forEach(d),me.forEach(d),ke.forEach(d),Ie.forEach(d),K=H(ae),D=v(ae,"DIV",{class:!0});var Ae=p(D);F=v(Ae,"DIV",{class:!0});var Fe=p(F);b=v(Fe,"DIV",{class:!0});var Oe=p(b);for(let N=0;N<I.length;N+=1)I[N].l(Oe);Oe.forEach(d),Fe.forEach(d),Ae.forEach(d),O=H(ae),R=v(ae,"DIV",{class:!0});var Pe=p(R);S=v(Pe,"DIV",{class:!0});var Me=p(S);C=v(Me,"DIV",{class:!0});var We=p(C);for(let N=0;N<k.length;N+=1)k[N].l(We);We.forEach(d),Me.forEach(d),Pe.forEach(d),ae.forEach(d),De.forEach(d),J.forEach(d),o.forEach(d),q.forEach(d),this.h()},h(){m(y,"class","fr-label"),m(y,"for","date"),m(w,"id","date"),m(w,"class","fr-select"),r[0]===void 0&&Ge(()=>r[11].call(w)),m(E,"class","fr-col-6"),m(M,"class","fr-label"),m(M,"for","env"),m(W,"id","env"),m(W,"class","fr-select"),r[1]===void 0&&Ge(()=>r[12].call(W)),m(z,"class","fr-col-6"),m(c,"class","fr-grid-row fr-grid-row--gutters"),m(i,"class","fr-container fr-container--fluid"),m(n,"class","fr-col-12"),m(b,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(F,"class","fr-container fr-container--fluid"),m(D,"class","fr-col-12"),m(C,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(S,"class","fr-container fr-container--fluid"),m(R,"class","fr-col-12"),m(a,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(l,"class","fr-container fr-container--fluid"),m(s,"class","fr-col-12"),m(t,"class","fr-grid-row fr-grid-row--gutters"),m(e,"class","fr-container fr-container--fluid")},m(u,q){T(u,e,q),h(e,t),h(t,s),h(s,l),h(l,a),h(a,n),h(n,i),h(i,c),h(c,E),h(E,y),h(y,f),h(E,_),h(E,w);for(let o=0;o<j.length;o+=1)j[o].m(w,null);be(w,r[0]),h(c,A),h(c,z),h(z,M),h(M,V),h(z,Y),h(z,W);for(let o=0;o<L.length;o+=1)L[o].m(W,null);be(W,r[1]),h(a,K),h(a,D),h(D,F),h(F,b);for(let o=0;o<I.length;o+=1)I[o].m(b,null);h(a,O),h(a,R),h(R,S),h(S,C);for(let o=0;o<k.length;o+=1)k[o].m(C,null);Z=!0,Q||(X=[He(w,"change",r[11]),He(W,"change",r[12])],Q=!0)},p(u,[q]){if(q&64){re=u[6];let o;for(o=0;o<re.length;o+=1){const J=tt(u,re,o);j[o]?j[o].p(J,q):(j[o]=st(J),j[o].c(),j[o].m(w,null))}for(;o<j.length;o+=1)j[o].d(1);j.length=re.length}if(q&65&&be(w,u[0]),q&128){le=u[7];let o;for(o=0;o<le.length;o+=1){const J=et(u,le,o);L[o]?L[o].p(J,q):(L[o]=rt(J),L[o].c(),L[o].m(W,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=le.length}if(q&130&&be(W,u[1]),q&60){$=u[4].filter(ot);let o;for(o=0;o<$.length;o+=1){const J=xe(u,$,o);I[o]?(I[o].p(J,q),P(I[o],1)):(I[o]=at(J),I[o].c(),P(I[o],1),I[o].m(b,null))}for(we(),o=$.length;o<I.length;o+=1)ct(o);qe()}if(q&1852){x=u[4].filter(it);let o;for(o=0;o<x.length;o+=1){const J=$e(u,x,o);k[o]?(k[o].p(J,q),P(k[o],1)):(k[o]=nt(J),k[o].c(),P(k[o],1),k[o].m(C,null))}for(we(),o=x.length;o<k.length;o+=1)dt(o);qe()}},i(u){if(!Z){for(let q=0;q<$.length;q+=1)P(I[q]);for(let q=0;q<x.length;q+=1)P(k[q]);Z=!0}},o(u){I=I.filter(Boolean);for(let q=0;q<I.length;q+=1)B(I[q]);k=k.filter(Boolean);for(let q=0;q<k.length;q+=1)B(k[q]);Z=!1},d(u){u&&d(e),Ee(j,u),Ee(L,u),Ee(I,u),Ee(k,u),Q=!1,Ft(X)}}}let xt=50;const ot=r=>["number","date"].includes(r.type),it=r=>!["number","date"].includes(r.type);function es(r,e,t){const s=[{query:"total_docs",type:"number"},{query:"last_decision_date",type:"date"},{query:"api_requests_number",type:"number"},{query:"decision_uniq_number",type:"number"},{query:"pods_number",type:"number"},{query:"api_requests_date_histogram",type:"line",legend:!0},{query:"top_words",type:"wordCloud",height:"400px",col:12,legend:!1},{query:"requests_ip_source",type:"pie",legend:!0},{query:"piste",type:"bar",legend:!1},{query:"errors_histogram",type:"bar",indexAxis:"y",legend:!1},{query:"latencty_date_histogram",type:"line",fill:!0,legend:!0},{query:"cpu_date_histogram",type:"line",fill:!0,legend:!0},{query:"mem_date_histogram",type:"line",fill:!0,legend:!0},{query:"bandwidth_date_histogram",type:"line",legend:!1}],l={total_docs:"D\xE9cisions index\xE9es",last_decision_date:"Date de la derni\xE8re d\xE9cision",api_requests_number:"Appels API",api_requests_date_histogram:"Requ\xEAtes",decision_uniq_number:"D\xE9cisions consult\xE9es",errors_histogram:"Erreurs http",requests_ip_source:"Canal d'appel",piste:"Utilisateurs Piste",latencty_date_histogram:"Latence",cpu_date_histogram:"CPU %",mem_date_histogram:"M\xE9moire",bandwidth_date_histogram:"R\xE9seau (octets)",top_words:"Recherches",pods_number:"Conteneurs"},a=[{label:"Dernier jour",start:"now-1d",end:"now",step:"1h"},{label:"Derni\xE8re heure",start:"now-1h",end:"now",step:"1m"},{label:"Derni\xE8re semaine",start:"now-7d",end:"now",step:"4h"},{label:"Dernier mois",start:"now-30d",end:"now",step:"1d"},{label:"Depuis le d\xE9but",start:"2020-01-01T00:00:00",end:"now",step:"1d"}],n=[{label:"Production",name:"production"},{label:"Secours",name:"secours"},{label:"Recette",name:"recette"}];let i=a[0],c=n[0],E={},y={};const f=()=>{s.forEach(D=>{t(3,y[D.query]=!0,y),fetch(new Request(`https://monitor.judilibre.io/stats?query=${D.query}&date_start=${i.start}&date_end=${i.end}&date_interval=${i.step}&env=${c.name}&size=${xt}`,{method:"GET",referer:"https://stats.judilibre.io",mode:"cors"})).then(F=>{if(F.ok)return F.json().then(b=>{t(2,E[D.query]=b[D.query],E),t(3,y[D.query]=!1,y)})})})},_=(D,F,b,O,R)=>{if(b==="time_series"){let S=0,C={};return D.forEach(Q=>{Object.keys(Q).forEach(X=>{X!=="date"&&(C[X]=!0)})}),C=Object.keys(C),C.includes("Mem.total")&&(C=["Mem.used.min","Mem.used.mean","Mem.used.max","Mem.total"]),{datasets:C.map(Q=>({data:D.map(X=>{if(X[Q])return{x:new Date(X.date),y:X[Q]}}),label:Q,borderColor:Y[S++],borderWidth:R?0:void 0,fill:R?"origin":void 0,backgroundColor:R?`#000091${9-2*S}${9-2*S}`:void 0}))}}else{let S=Object.keys(D).sort((C,Z)=>D[Z]-D[C]);return{datasets:[{data:S.map(C=>D[C]),backgroundColor:Y,borderWidth:0,label:l[F]}],labels:S.map(C=>z(C))}}},w=D=>Object.keys(D).filter(F=>F.length>1&&F!=="chien").map(F=>({text:F,count:D[F]})),A={"80.87.226.10":"courdecassation.fr","185.24.185.49":"piste.gouv.fr"},z=D=>A[D]||D,M={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},interaction:{mode:"index"},hover:{intersect:!1},elements:{point:{radius:0},line:{tension:.15}}},V={"F-blue-soft":"#5770BE","N-orange-dark":"#E18863","E-green-soft":"#00AC8C","L-yellow-dark":"#FDCF41","Q-brown":"#A26859","J-pink-light":"#FFC29E","$blue-france":"#000091","$red-marianne":"#E1000F","A-green-warm":"#958B62","B-green-light":"#91AE4F","C-green-warm":"#169B62","G-blue-dark":"#484D7A","H-pink-soft":"#FF8D7E","I-pink-dark":"#D08A77","K-yellow-medium":"#FFE800","M-orange-medium":"#FF9940","O-orange-soft":"#FF6F4C","P-purple":"#7D4E5B"},Y=Object.keys(V).map(D=>V[D]);function W(){i=Ke(this),t(0,i),t(6,a)}function K(){c=Ke(this),t(1,c),t(7,n)}return r.$$.update=()=>{r.$$.dirty&3&&(i||c)&&f()},[i,c,E,y,s,l,a,n,_,w,M,W,K]}class ts extends ne{constructor(e){super();oe(this,e,es,$t,ie,{})}}function ss(r){let e,t,s,l,a,n,i;return n=new ts({}),{c(){e=G(),t=g("section"),s=g("div"),l=g("div"),a=g("div"),de(n.$$.fragment),this.h()},l(c){Pt('[data-svelte="svelte-9qr2em"]',document.head).forEach(d),e=H(c),t=v(c,"SECTION",{});var y=p(t);s=v(y,"DIV",{class:!0});var f=p(s);l=v(f,"DIV",{class:!0});var _=p(l);a=v(_,"DIV",{class:!0});var w=p(a);ue(n.$$.fragment,w),w.forEach(d),_.forEach(d),f.forEach(d),y.forEach(d),this.h()},h(){document.title="API Judilibre - statistiques",m(a,"class","fr-col-12 fr-mt-2w"),m(l,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(s,"class","fr-container")},m(c,E){T(c,e,E),T(c,t,E),h(t,s),h(s,l),h(l,a),fe(n,a,null),i=!0},p:U,i(c){i||(P(n.$$.fragment,c),i=!0)},o(c){B(n.$$.fragment,c),i=!1},d(c){c&&d(e),c&&d(t),he(n)}}}const as=!0;class ns extends ne{constructor(e){super();oe(this,e,null,ss,ie,{})}}export{ns as default,as as prerender};

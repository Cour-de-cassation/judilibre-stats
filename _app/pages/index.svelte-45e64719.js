var it=Object.defineProperty,ot=Object.defineProperties;var ct=Object.getOwnPropertyDescriptors;var Te=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var Le=(t,e,r)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q=(t,e)=>{for(var r in e||(e={}))ut.call(e,r)&&Le(t,r,e[r]);if(Te)for(var r of Te(e))dt.call(e,r)&&Le(t,r,e[r]);return t},_e=(t,e)=>ot(t,ct(e));import{S as oe,i as ce,s as ue,H as Re,e as _,k as L,c as p,a as v,d as c,n as R,b as m,f as N,F as f,I as Ne,J as Be,K as ze,x as O,u as B,E as Me,G as x,L as re,M as ft,W as ht,N as _t,O as pt,P as vt,t as ee,g as te,j as pe,m as ve,o as me,v as ge,r as be,w as ye,Q as We,R as de,T as Ge,U as fe,V as mt,h as gt,X as He,Y as bt}from"../chunks/vendor-309c7e4b.js";const yt=t=>({}),Je=t=>({}),Et=t=>({}),Ue=t=>({});function qt(t){let e,r,l,a,i,s;const u=t[1].title,d=Re(u,t,t[0],Ue),w=t[1].desc,g=Re(w,t,t[0],Je);return{c(){e=_("div"),r=_("div"),l=_("h4"),d&&d.c(),a=L(),i=_("p"),g&&g.c(),this.h()},l(b){e=p(b,"DIV",{class:!0});var h=v(e);r=p(h,"DIV",{class:!0});var D=v(r);l=p(D,"H4",{class:!0});var M=v(l);d&&d.l(M),M.forEach(c),a=R(D),i=p(D,"P",{class:!0});var H=v(i);g&&g.l(H),H.forEach(c),D.forEach(c),h.forEach(c),this.h()},h(){m(l,"class","fr-tile__title"),m(i,"class","rf-tile__desc fr-mt-0 fr-mb-0"),m(r,"class","fr-tile__body"),m(e,"class","fr-tile")},m(b,h){N(b,e,h),f(e,r),f(r,l),d&&d.m(l,null),f(r,a),f(r,i),g&&g.m(i,null),s=!0},p(b,[h]){d&&d.p&&(!s||h&1)&&Ne(d,u,b,b[0],s?ze(u,b[0],h,Et):Be(b[0]),Ue),g&&g.p&&(!s||h&1)&&Ne(g,w,b,b[0],s?ze(w,b[0],h,yt):Be(b[0]),Je)},i(b){s||(O(d,b),O(g,b),s=!0)},o(b){B(d,b),B(g,b),s=!1},d(b){b&&c(e),d&&d.d(b),g&&g.d(b)}}}function wt(t,e,r){let{$$slots:l={},$$scope:a}=e;return t.$$set=i=>{"$$scope"in i&&r(0,a=i.$$scope)},[a,l]}class Dt extends oe{constructor(e){super();ce(this,e,wt,qt,ue,{})}}function It(t){let e;return{c(){e=_("canvas"),this.h()},l(r){e=p(r,"CANVAS",{style:!0}),v(e).forEach(c),this.h()},h(){Me(e,"height",t[0]||"250px")},m(r,l){N(r,e,l),t[5](e)},p(r,[l]){l&1&&Me(e,"height",r[0]||"250px")},i:x,o:x,d(r){r&&c(e),t[5](null)}}}function Vt(t,e,r){let{type:l="line"}=e,{data:a}=e,{height:i}=e,{options:s={}}=e;re.register(...ft),re.register(ht,_t),re.register(pt),re.defaults.font.family='"Marianne"';let u,d,w;function g(){w=u.getContext("2d"),d&&d.destroy(),d=new re(w,{type:l,data:a,options:s})}function b(h){vt[h?"unshift":"push"](()=>{u=h,r(1,u)})}return t.$$set=h=>{"type"in h&&r(2,l=h.type),"data"in h&&r(3,a=h.data),"height"in h&&r(0,i=h.height),"options"in h&&r(4,s=h.options)},t.$$.update=()=>{t.$$.dirty&8&&a&&g()},[i,u,l,a,s,b]}class $t extends oe{constructor(e){super();ce(this,e,Vt,It,ue,{type:2,data:3,height:0,options:4})}}function Fe(t,e,r){const l=t.slice();return l[16]=e[r],l[18]=r,l}function Ke(t,e,r){const l=t.slice();return l[19]=e[r],l}function Qe(t,e,r){const l=t.slice();return l[22]=e[r],l}function Xe(t,e,r){const l=t.slice();return l[25]=e[r],l}function Ye(t){let e,r=t[25].label+"",l,a,i;return{c(){e=_("option"),l=ee(r),a=L(),this.h()},l(s){e=p(s,"OPTION",{});var u=v(e);l=te(u,r),a=R(u),u.forEach(c),this.h()},h(){e.__value=i=t[25],e.value=e.__value},m(s,u){N(s,e,u),f(e,l),f(e,a)},p:x,d(s){s&&c(e)}}}function Ze(t){let e,r=t[22].label+"",l,a,i;return{c(){e=_("option"),l=ee(r),a=L(),this.h()},l(s){e=p(s,"OPTION",{});var u=v(e);l=te(u,r),a=R(u),u.forEach(c),this.h()},h(){e.__value=i=t[22],e.value=e.__value},m(s,u){N(s,e,u),f(e,l),f(e,a)},p:x,d(s){s&&c(e)}}}function xe(t){let e,r;return e=new Dt({props:{$$slots:{desc:[Ct],title:[kt]},$$scope:{ctx:t}}}),{c(){pe(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,a){me(e,l,a),r=!0},p(l,a){const i={};a&268435460&&(i.$$scope={dirty:a,ctx:l}),e.$set(i)},i(l){r||(O(e.$$.fragment,l),r=!0)},o(l){B(e.$$.fragment,l),r=!1},d(l){ge(e,l)}}}function kt(t){let e,r=t[2][t[19]].data+"",l;return{c(){e=_("span"),l=ee(r),this.h()},l(a){e=p(a,"SPAN",{slot:!0});var i=v(e);l=te(i,r),i.forEach(c),this.h()},h(){m(e,"slot","title")},m(a,i){N(a,e,i),f(e,l)},p(a,i){i&4&&r!==(r=a[2][a[19]].data+"")&&gt(l,r)},d(a){a&&c(e)}}}function Ct(t){let e,r=t[4][t[19]]+"",l;return{c(){e=_("span"),l=ee(r),this.h()},l(a){e=p(a,"SPAN",{slot:!0});var i=v(e);l=te(i,r),i.forEach(c),this.h()},h(){m(e,"slot","desc")},m(a,i){N(a,e,i),f(e,l)},p:x,d(a){a&&c(e)}}}function et(t){let e,r,l,a=t[2][t[19]]&&xe(t);return{c(){e=_("div"),a&&a.c(),r=L(),this.h()},l(i){e=p(i,"DIV",{class:!0});var s=v(e);a&&a.l(s),r=R(s),s.forEach(c),this.h()},h(){m(e,"class","fr-col")},m(i,s){N(i,e,s),a&&a.m(e,null),f(e,r),l=!0},p(i,s){i[2][i[19]]?a?(a.p(i,s),s&4&&O(a,1)):(a=xe(i),a.c(),O(a,1),a.m(e,r)):a&&(be(),B(a,1,1,()=>{a=null}),ye())},i(i){l||(O(a),l=!0)},o(i){B(a),l=!1},d(i){i&&c(e),a&&a.d()}}}function tt(t){let e,r,l,a,i;return r=new $t({props:{height:t[16].height,type:t[16].type,data:t[2][t[16].query]&&Q({},t[7](t[2][t[16].query].data,t[16].query,t[2][t[16].query].type,t[16].chartType)),options:Q({plugins:{title:{display:!0,text:t[4][t[16].query]},legend:{display:t[2][t[16].query]&&t[2][t[16].query].type==="time_series"}}},t[2][t[16].query]&&t[2][t[16].query].type==="time_series"?_e(Q({},t[8]),{scales:{x:{type:"time"}}}):t[8])}}),{c(){e=_("div"),pe(r.$$.fragment),l=L(),this.h()},l(s){e=p(s,"DIV",{class:!0});var u=v(e);ve(r.$$.fragment,u),l=R(u),u.forEach(c),this.h()},h(){m(e,"class",a="fr-col-12 fr-col-md-"+(t[16].col||6))},m(s,u){N(s,e,u),me(r,e,null),f(e,l),i=!0},p(s,u){const d={};u&4&&(d.data=s[2][s[16].query]&&Q({},s[7](s[2][s[16].query].data,s[16].query,s[2][s[16].query].type,s[16].chartType))),u&4&&(d.options=Q({plugins:{title:{display:!0,text:s[4][s[16].query]},legend:{display:s[2][s[16].query]&&s[2][s[16].query].type==="time_series"}}},s[2][s[16].query]&&s[2][s[16].query].type==="time_series"?_e(Q({},s[8]),{scales:{x:{type:"time"}}}):s[8])),r.$set(d)},i(s){i||(O(r.$$.fragment,s),i=!0)},o(s){B(r.$$.fragment,s),i=!1},d(s){s&&c(e),ge(r)}}}function jt(t){let e,r,l,a,i,s,u,d,w,g,b,h,D,M,H,C,I,A,z,W,P,T,J,G,S,X,U,se,he,Ee,Y=t[5],V=[];for(let o=0;o<Y.length;o+=1)V[o]=Ye(Xe(t,Y,o));let Z=t[6],$=[];for(let o=0;o<Z.length;o+=1)$[o]=Ze(Qe(t,Z,o));let F=t[3].filter(rt).map(st),E=[];for(let o=0;o<F.length;o+=1)E[o]=et(Ke(t,F,o));const at=o=>B(E[o],1,1,()=>{E[o]=null});let K=t[3].filter(lt),q=[];for(let o=0;o<K.length;o+=1)q[o]=tt(Fe(t,K,o));const nt=o=>B(q[o],1,1,()=>{q[o]=null});return{c(){e=_("div"),r=_("div"),l=_("div"),a=_("div"),i=_("div"),s=_("div"),u=_("label"),d=ee("Plage de dates"),w=L(),g=_("select");for(let o=0;o<V.length;o+=1)V[o].c();b=L(),h=_("div"),D=_("label"),M=ee("Environnement"),H=L(),C=_("select");for(let o=0;o<$.length;o+=1)$[o].c();I=L(),A=_("div"),z=_("div"),W=_("div"),P=_("div"),T=_("div"),J=_("div");for(let o=0;o<E.length;o+=1)E[o].c();G=L(),S=_("div"),X=_("div"),U=_("div");for(let o=0;o<q.length;o+=1)q[o].c();this.h()},l(o){e=p(o,"DIV",{class:!0});var y=v(e);r=p(y,"DIV",{class:!0});var n=v(r);l=p(n,"DIV",{class:!0});var j=v(l);a=p(j,"DIV",{class:!0});var qe=v(a);i=p(qe,"DIV",{class:!0});var le=v(i);s=p(le,"DIV",{class:!0});var ae=v(s);u=p(ae,"LABEL",{class:!0,for:!0});var we=v(u);d=te(we,"Plage de dates"),we.forEach(c),w=R(ae),g=p(ae,"SELECT",{id:!0,class:!0});var De=v(g);for(let k=0;k<V.length;k+=1)V[k].l(De);De.forEach(c),ae.forEach(c),b=R(le),h=p(le,"DIV",{class:!0});var ne=v(h);D=p(ne,"LABEL",{class:!0,for:!0});var Ie=v(D);M=te(Ie,"Environnement"),Ie.forEach(c),H=R(ne),C=p(ne,"SELECT",{id:!0,class:!0});var Ve=v(C);for(let k=0;k<$.length;k+=1)$[k].l(Ve);Ve.forEach(c),ne.forEach(c),le.forEach(c),qe.forEach(c),j.forEach(c),I=R(n),A=p(n,"DIV",{class:!0});var $e=v(A);z=p($e,"DIV",{class:!0});var ke=v(z);W=p(ke,"DIV",{class:!0});var ie=v(W);P=p(ie,"DIV",{class:!0});var Ce=v(P);T=p(Ce,"DIV",{class:!0});var je=v(T);J=p(je,"DIV",{class:!0});var Oe=v(J);for(let k=0;k<E.length;k+=1)E[k].l(Oe);Oe.forEach(c),je.forEach(c),Ce.forEach(c),G=R(ie),S=p(ie,"DIV",{class:!0});var Se=v(S);X=p(Se,"DIV",{class:!0});var Pe=v(X);U=p(Pe,"DIV",{class:!0});var Ae=v(U);for(let k=0;k<q.length;k+=1)q[k].l(Ae);Ae.forEach(c),Pe.forEach(c),Se.forEach(c),ie.forEach(c),ke.forEach(c),$e.forEach(c),n.forEach(c),y.forEach(c),this.h()},h(){m(u,"class","fr-label"),m(u,"for","date"),m(g,"id","date"),m(g,"class","fr-select"),t[0]===void 0&&We(()=>t[9].call(g)),m(s,"class","fr-col-6"),m(D,"class","fr-label"),m(D,"for","cluster"),m(C,"id","cluster"),m(C,"class","fr-select"),t[1]===void 0&&We(()=>t[10].call(C)),m(h,"class","fr-col-6"),m(i,"class","fr-grid-row fr-grid-row--gutters"),m(a,"class","fr-container fr-container--fluid"),m(l,"class","fr-col-12"),m(J,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(T,"class","fr-container fr-container--fluid"),m(P,"class","fr-col-12"),m(U,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(X,"class","fr-container fr-container--fluid"),m(S,"class","fr-col-12"),m(W,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(z,"class","fr-container fr-container--fluid"),m(A,"class","fr-col-12"),m(r,"class","fr-grid-row fr-grid-row--gutters"),m(e,"class","fr-container fr-container--fluid")},m(o,y){N(o,e,y),f(e,r),f(r,l),f(l,a),f(a,i),f(i,s),f(s,u),f(u,d),f(s,w),f(s,g);for(let n=0;n<V.length;n+=1)V[n].m(g,null);de(g,t[0]),f(i,b),f(i,h),f(h,D),f(D,M),f(h,H),f(h,C);for(let n=0;n<$.length;n+=1)$[n].m(C,null);de(C,t[1]),f(r,I),f(r,A),f(A,z),f(z,W),f(W,P),f(P,T),f(T,J);for(let n=0;n<E.length;n+=1)E[n].m(J,null);f(W,G),f(W,S),f(S,X),f(X,U);for(let n=0;n<q.length;n+=1)q[n].m(U,null);se=!0,he||(Ee=[Ge(g,"change",t[9]),Ge(C,"change",t[10])],he=!0)},p(o,[y]){if(y&32){Y=o[5];let n;for(n=0;n<Y.length;n+=1){const j=Xe(o,Y,n);V[n]?V[n].p(j,y):(V[n]=Ye(j),V[n].c(),V[n].m(g,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=Y.length}if(y&33&&de(g,o[0]),y&64){Z=o[6];let n;for(n=0;n<Z.length;n+=1){const j=Qe(o,Z,n);$[n]?$[n].p(j,y):($[n]=Ze(j),$[n].c(),$[n].m(C,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=Z.length}if(y&66&&de(C,o[1]),y&28){F=o[3].filter(rt).map(st);let n;for(n=0;n<F.length;n+=1){const j=Ke(o,F,n);E[n]?(E[n].p(j,y),O(E[n],1)):(E[n]=et(j),E[n].c(),O(E[n],1),E[n].m(J,null))}for(be(),n=F.length;n<E.length;n+=1)at(n);ye()}if(y&412){K=o[3].filter(lt);let n;for(n=0;n<K.length;n+=1){const j=Fe(o,K,n);q[n]?(q[n].p(j,y),O(q[n],1)):(q[n]=tt(j),q[n].c(),O(q[n],1),q[n].m(U,null))}for(be(),n=K.length;n<q.length;n+=1)nt(n);ye()}},i(o){if(!se){for(let y=0;y<F.length;y+=1)O(E[y]);for(let y=0;y<K.length;y+=1)O(q[y]);se=!0}},o(o){E=E.filter(Boolean);for(let y=0;y<E.length;y+=1)B(E[y]);q=q.filter(Boolean);for(let y=0;y<q.length;y+=1)B(q[y]);se=!1},d(o){o&&c(e),fe(V,o),fe($,o),fe(E,o),fe(q,o),he=!1,mt(Ee)}}}let Ot=50;const rt=t=>t.type==="number",st=t=>t.query,lt=t=>t.type!=="number";function St(t,e,r){const l=[{query:"api_requests_number",type:"number"},{query:"api_requests_date_histogram",type:"line"},{query:"decision_uniq_number",type:"number"},{query:"errors_histogram",type:"bar"},{query:"requests_ip_source",type:"bar"},{query:"latencty_date_histogram",type:"line"},{query:"pods_number",type:"number"},{query:"cpu_date_histogram",type:"line"},{query:"mem_date_histogram",type:"line"},{query:"bandwidth_date_histogram",type:"line"},{query:"top_words",type:"bar",height:"400px",col:12}],a={api_requests_number:"Appels API",api_requests_date_histogram:"Requ\xEAtes",decision_uniq_number:"D\xE9cisions consult\xE9es",errors_histogram:"Erreurs http",requests_ip_source:"Canal d'appel",latencty_date_histogram:"Latence",cpu_date_histogram:"CPU %",mem_date_histogram:"M\xE9moire",bandwidth_date_histogram:"R\xE9seau (octets)",top_words:"Recherches",pods_number:"Conteneurs"},i=[{label:"Dernier jour",start:"now-1d",end:"now",step:"30m"},{label:"Derni\xE8re heure",start:"now-1h",end:"now",step:"2m"},{label:"Derni\xE8re semaine",start:"now-7d",end:"now",step:"12h"},{label:"Dernier mois",start:"now-30d",end:"now",step:"1d"},{label:"Depuis le d\xE9but",start:"2020-01-01T00:00:00",end:"now",step:"1d"}];let s=i[0];const u=[{label:"Production",name:"judilibre-scw-prod-par2"},{label:"Secours",name:"judilibre-scw-prod-par1"},{label:"Recette",name:"judilibre-scw-dev-par1"}];let d=u[0],w={};const g=(I,A,z,W)=>{if(z==="time_series"){let P=0,T={};return I.forEach(G=>{Object.keys(G).forEach(S=>{S!=="date"&&(T[S]=!0)})}),T=Object.keys(T),{datasets:T.map(G=>({data:I.map(S=>{if(S[G])return{x:new Date(S.date),y:S[G]}}),label:G,borderColor:M[P++]}))}}else return{datasets:[{data:Object.keys(I).map(P=>I[P]),backgroundColor:M[0],label:a[A]}],labels:Object.keys(I).map(P=>h(P))}},b={"80.87.226.10":"courdecassation.fr","185.24.185.49":"piste.gouv.fr"},h=I=>b[I]||I,D={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},interaction:{mode:"index"},hover:{intersect:!1},elements:{point:{radius:0},line:{tension:0}}},M=["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"];function H(){s=He(this),r(0,s),r(5,i)}function C(){d=He(this),r(1,d),r(6,u)}return t.$$.update=()=>{t.$$.dirty&3&&(s||d)&&l.forEach(I=>{fetch(new Request(`https://monitor.judilibre.io/stats?query=${I.query}&date_start=${s.start}&date_end=${s.end}&date_interval=${s.step}&cluster=${d.name}&size=${Ot}`,{method:"GET",referer:"https://stats.judilibre.io",mode:"cors"})).then(A=>{if(A.ok)return A.json().then(z=>{r(2,w[I.query]=z[I.query],w)})})})},[s,d,w,l,a,i,u,g,D,H,C]}class Pt extends oe{constructor(e){super();ce(this,e,St,jt,ue,{})}}function At(t){let e,r,l,a,i,s,u;return s=new Pt({}),{c(){e=L(),r=_("section"),l=_("div"),a=_("div"),i=_("div"),pe(s.$$.fragment),this.h()},l(d){bt('[data-svelte="svelte-9qr2em"]',document.head).forEach(c),e=R(d),r=p(d,"SECTION",{});var g=v(r);l=p(g,"DIV",{class:!0});var b=v(l);a=p(b,"DIV",{class:!0});var h=v(a);i=p(h,"DIV",{class:!0});var D=v(i);ve(s.$$.fragment,D),D.forEach(c),h.forEach(c),b.forEach(c),g.forEach(c),this.h()},h(){document.title="API Judilibre - statistiques",m(i,"class","fr-col-12 fr-mt-2w"),m(a,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(l,"class","fr-container")},m(d,w){N(d,e,w),N(d,r,w),f(r,l),f(l,a),f(a,i),me(s,i,null),u=!0},p:x,i(d){u||(O(s.$$.fragment,d),u=!0)},o(d){B(s.$$.fragment,d),u=!1},d(d){d&&c(e),d&&c(r),ge(s)}}}const Rt=!0;class Nt extends oe{constructor(e){super();ce(this,e,null,At,ue,{})}}export{Nt as default,Rt as prerender};

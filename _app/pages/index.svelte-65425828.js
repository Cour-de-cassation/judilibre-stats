var ut=Object.defineProperty,ft=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var Te=(r,e,t)=>e in r?ut(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,x=(r,e)=>{for(var t in e||(e={}))_t.call(e,t)&&Te(r,t,e[t]);if(Le)for(var t of Le(e))mt.call(e,t)&&Te(r,t,e[t]);return r},he=(r,e)=>ft(r,ht(e));import{S as ae,i as ne,s as oe,H as Ne,e as v,k as G,c as g,a as p,d,n as H,b as m,f as B,F as h,I as We,J as Be,K as Re,x as O,u as R,E as ie,G as X,L as ge,M as vt,N as gt,O as pt,t as ee,g as te,P as pe,Q as yt,R as bt,T as wt,U as Et,V as qt,W as Dt,X as It,Y as kt,Z as Vt,_ as zt,$ as Ct,a0 as St,a1 as At,a2 as Je,j as ce,m as de,o as ue,v as fe,r as we,w as Ee,a3 as Ge,a4 as ye,a5 as He,a6 as be,a7 as Ft,h as Ot,a8 as Ke,a9 as Pt}from"../chunks/vendor-3dafa106.js";const Mt=r=>({}),Ue=r=>({}),jt=r=>({}),Qe=r=>({});function Lt(r){let e,t,s,l,a,n;const i=r[1].title,c=Ne(i,r,r[0],Qe),b=r[1].desc,y=Ne(b,r,r[0],Ue);return{c(){e=v("div"),t=v("div"),s=v("h4"),c&&c.c(),l=G(),a=v("p"),y&&y.c(),this.h()},l(f){e=g(f,"DIV",{class:!0});var _=p(e);t=g(_,"DIV",{class:!0});var E=p(t);s=g(E,"H4",{class:!0});var S=p(s);c&&c.l(S),S.forEach(d),l=H(E),a=g(E,"P",{class:!0});var I=p(a);y&&y.l(I),I.forEach(d),E.forEach(d),_.forEach(d),this.h()},h(){m(s,"class","fr-tile__title"),m(a,"class","rf-tile__desc fr-mt-0 fr-mb-0"),m(t,"class","fr-tile__body"),m(e,"class","fr-tile")},m(f,_){B(f,e,_),h(e,t),h(t,s),c&&c.m(s,null),h(t,l),h(t,a),y&&y.m(a,null),n=!0},p(f,[_]){c&&c.p&&(!n||_&1)&&We(c,i,f,f[0],n?Re(i,f[0],_,jt):Be(f[0]),Qe),y&&y.p&&(!n||_&1)&&We(y,b,f,f[0],n?Re(b,f[0],_,Mt):Be(f[0]),Ue)},i(f){n||(O(c,f),O(y,f),n=!0)},o(f){R(c,f),R(y,f),n=!1},d(f){f&&d(e),c&&c.d(f),y&&y.d(f)}}}function Tt(r,e,t){let{$$slots:s={},$$scope:l}=e;return r.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class Nt extends ae{constructor(e){super();ne(this,e,Tt,Lt,oe,{})}}function Wt(r){let e;return{c(){e=v("canvas"),this.h()},l(t){e=g(t,"CANVAS",{style:!0}),p(e).forEach(d),this.h()},h(){ie(e,"height",r[0]||"250px")},m(t,s){B(t,e,s),r[5](e)},p(t,[s]){s&1&&ie(e,"height",t[0]||"250px")},i:X,o:X,d(t){t&&d(e),r[5](null)}}}function Bt(r,e,t){let{type:s="line"}=e,{data:l}=e,{height:a}=e,{options:n={}}=e;ge.register(...vt),ge.register(gt),ge.defaults.font.family='"Marianne"';let i,c,b;function y(){b=i.getContext("2d"),c?(c.data=l,c.update()):c=new ge(b,{type:s,data:l,options:n})}function f(_){pt[_?"unshift":"push"](()=>{i=_,t(1,i)})}return r.$$set=_=>{"type"in _&&t(2,s=_.type),"data"in _&&t(3,l=_.data),"height"in _&&t(0,a=_.height),"options"in _&&t(4,n=_.options)},r.$$.update=()=>{r.$$.dirty&8&&l&&y()},[a,i,s,l,n,f]}class Rt extends ae{constructor(e){super();ne(this,e,Bt,Wt,oe,{type:2,data:3,height:0,options:4})}}function Xe(r){let e;return{c(){e=ee("(pas de requ\xEAte)")},l(t){e=te(t,"(pas de requ\xEAte)")},m(t,s){B(t,e,s)},d(t){t&&d(e)}}}function Jt(r){let e,t=r[0]&&r[0].length===0&&Xe();return{c(){e=v("div"),t&&t.c(),this.h()},l(s){e=g(s,"DIV",{id:!0,style:!0,class:!0});var l=p(e);t&&t.l(l),l.forEach(d),this.h()},h(){m(e,"id","wordcloud"),ie(e,"height","100%"),ie(e,"max-height","250px"),ie(e,"display","block"),ie(e,"margin","auto"),m(e,"class","svelte-f0olj7"),pe(e,"inactive",r[1])},m(s,l){B(s,e,l),t&&t.m(e,null)},p(s,[l]){s[0]&&s[0].length===0?t||(t=Xe(),t.c(),t.m(e,null)):t&&(t.d(1),t=null),l&2&&pe(e,"inactive",s[1])},i:X,o:X,d(s){s&&d(e),t&&t.d()}}}function Gt(r,e,t){const s=yt(),l={schemeCategory10:Et,schemeAccent:qt,schemeDark2:Dt,schemePaired:It,schemePastel1:kt,schemePastel2:Vt,schemeSet1:zt,schemeSet2:Ct,schemeSet3:St,schemeTableau10:At};let{words:a}=e,{height:n=900}=e,{width:i=1600}=e,{font:c='"Marianne"'}=e,{maxFontSize:b=250}=e,{scheme:y="schemeTableau10"}=e,{padding:f=4}=e,_=!1,E=1,S="",I;const P=bt(l[y]),z=w=>s("click",w),Y=w=>s("mouseover",w),j=w=>s("mouseout",w),D=w=>s("mousemove",w);let A;const M=w=>{Je("#wordcloud").append("svg").attr("viewBox",`0 0 ${i} ${n}`).attr("width","100%").attr("height","100%").classed("svg-content-responsive",!0).append("g").attr("transform","translate("+A.size()[0]/2+","+A.size()[1]/2+")").selectAll("text").data(w).enter().append("text").style("font-size",C=>C.size+"px").style("font-weight",C=>Math.min(800,C.size*800/E)).style("font-family",c).style("fill",(C,N)=>P(N)).attr("text-anchor","middle").attr("transform",C=>"translate("+[C.x,C.y]+")rotate("+C.rotate+")").text(C=>C.text).on("click",z).on("mouseover",Y).on("mouseout",j).on("mousemove",D)};return r.$$set=w=>{"words"in w&&t(0,a=w.words),"height"in w&&t(2,n=w.height),"width"in w&&t(3,i=w.width),"font"in w&&t(4,c=w.font),"maxFontSize"in w&&t(5,b=w.maxFontSize),"scheme"in w&&t(6,y=w.scheme),"padding"in w&&t(7,f=w.padding)},r.$$.update=()=>{r.$$.dirty&4029&&a&&JSON.stringify(a)!==S&&(a.length?(console.log(a),t(1,_=!1),A&&Je("#wordcloud").select("svg").remove(),t(9,S=JSON.stringify(a)),t(10,I=Math.max(...a.map(w=>w.count),0)),t(11,A=wt().size([i,n]).words(a).padding(f).rotate(()=>~~(Math.random()*2)*90).font(c).fontSize(w=>{const C=Math.floor(w.count/I*b)+1;return t(8,E=Math.max(E,C)),C}).on("end",M)),A.start()):(t(9,S=JSON.stringify(a)),t(1,_=!0)))},[a,_,n,i,c,b,y,f,E,S,I,A]}class Ht extends ae{constructor(e){super();ne(this,e,Gt,Jt,oe,{words:0,height:2,width:3,font:4,maxFontSize:5,scheme:6,padding:7})}}function Ye(r){let e,t,s,l,a,n,i,c,b,y,f,_,E,S;return{c(){e=v("div"),t=v("div"),s=v("div"),l=v("div"),a=v("div"),n=v("div"),i=v("div"),c=v("div"),b=v("div"),y=v("div"),f=v("div"),_=v("div"),E=v("div"),S=v("div"),this.h()},l(I){e=g(I,"DIV",{class:!0});var P=p(e);t=g(P,"DIV",{class:!0});var z=p(t);s=g(z,"DIV",{class:!0}),p(s).forEach(d),l=g(z,"DIV",{class:!0}),p(l).forEach(d),a=g(z,"DIV",{class:!0}),p(a).forEach(d),n=g(z,"DIV",{class:!0}),p(n).forEach(d),i=g(z,"DIV",{class:!0}),p(i).forEach(d),c=g(z,"DIV",{class:!0}),p(c).forEach(d),b=g(z,"DIV",{class:!0}),p(b).forEach(d),y=g(z,"DIV",{class:!0}),p(y).forEach(d),f=g(z,"DIV",{class:!0}),p(f).forEach(d),_=g(z,"DIV",{class:!0}),p(_).forEach(d),E=g(z,"DIV",{class:!0}),p(E).forEach(d),S=g(z,"DIV",{class:!0}),p(S).forEach(d),z.forEach(d),P.forEach(d),this.h()},h(){m(s,"class","svelte-zmyo9f"),m(l,"class","svelte-zmyo9f"),m(a,"class","svelte-zmyo9f"),m(n,"class","svelte-zmyo9f"),m(i,"class","svelte-zmyo9f"),m(c,"class","svelte-zmyo9f"),m(b,"class","svelte-zmyo9f"),m(y,"class","svelte-zmyo9f"),m(f,"class","svelte-zmyo9f"),m(_,"class","svelte-zmyo9f"),m(E,"class","svelte-zmyo9f"),m(S,"class","svelte-zmyo9f"),m(t,"class","lds-spinner svelte-zmyo9f"),m(e,"class","load-content svelte-zmyo9f")},m(I,P){B(I,e,P),h(e,t),h(t,s),h(t,l),h(t,a),h(t,n),h(t,i),h(t,c),h(t,b),h(t,y),h(t,f),h(t,_),h(t,E),h(t,S)},d(I){I&&d(e)}}}function Kt(r){let e,t=r[0]&&Ye();return{c(){e=v("div"),t&&t.c(),this.h()},l(s){e=g(s,"DIV",{class:!0});var l=p(e);t&&t.l(l),l.forEach(d),this.h()},h(){m(e,"class","svelte-zmyo9f"),pe(e,"load-container",r[0])},m(s,l){B(s,e,l),t&&t.m(e,null)},p(s,[l]){s[0]?t||(t=Ye(),t.c(),t.m(e,null)):t&&(t.d(1),t=null),l&1&&pe(e,"load-container",s[0])},i:X,o:X,d(s){s&&d(e),t&&t.d()}}}function Ut(r,e,t){let{show:s=!1}=e;return r.$$set=l=>{"show"in l&&t(0,s=l.show)},[s]}class Ze extends ae{constructor(e){super();ne(this,e,Ut,Kt,oe,{show:0})}}function $e(r,e,t){const s=r.slice();return s[19]=e[t],s[21]=t,s}function xe(r,e,t){const s=r.slice();return s[19]=e[t],s[21]=t,s}function et(r,e,t){const s=r.slice();return s[23]=e[t],s}function tt(r,e,t){const s=r.slice();return s[26]=e[t],s}function st(r){let e,t=r[26].label+"",s,l,a;return{c(){e=v("option"),s=ee(t),l=G(),this.h()},l(n){e=g(n,"OPTION",{});var i=p(e);s=te(i,t),l=H(i),i.forEach(d),this.h()},h(){e.__value=a=r[26],e.value=e.__value},m(n,i){B(n,e,i),h(e,s),h(e,l)},p:X,d(n){n&&d(e)}}}function rt(r){let e,t=r[23].label+"",s,l,a;return{c(){e=v("option"),s=ee(t),l=G(),this.h()},l(n){e=g(n,"OPTION",{});var i=p(e);s=te(i,t),l=H(i),i.forEach(d),this.h()},h(){e.__value=a=r[23],e.value=e.__value},m(n,i){B(n,e,i),h(e,s),h(e,l)},p:X,d(n){n&&d(e)}}}function lt(r){let e,t;return e=new Nt({props:{$$slots:{desc:[Xt],title:[Qt]},$$scope:{ctx:r}}}),{c(){ce(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,l){ue(e,s,l),t=!0},p(s,l){const a={};l&536870916&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){fe(e,s)}}}function Qt(r){let e,t=(r[19].type==="number"?r[2][r[19].query].data:r[2][r[19].query].data.replace(/(....)-(..)-(..)/,"$3/$2/$1"))+"",s;return{c(){e=v("span"),s=ee(t),this.h()},l(l){e=g(l,"SPAN",{slot:!0});var a=p(e);s=te(a,t),a.forEach(d),this.h()},h(){m(e,"slot","title")},m(l,a){B(l,e,a),h(e,s)},p(l,a){a&4&&t!==(t=(l[19].type==="number"?l[2][l[19].query].data:l[2][l[19].query].data.replace(/(....)-(..)-(..)/,"$3/$2/$1"))+"")&&Ot(s,t)},d(l){l&&d(e)}}}function Xt(r){let e,t=r[5][r[19].query]+"",s;return{c(){e=v("span"),s=ee(t),this.h()},l(l){e=g(l,"SPAN",{slot:!0});var a=p(e);s=te(a,t),a.forEach(d),this.h()},h(){m(e,"slot","desc")},m(l,a){B(l,e,a),h(e,s)},p:X,d(l){l&&d(e)}}}function at(r){let e,t,s,l,a;t=new Ze({props:{show:r[3][r[19].query]&&r[2][r[19].query]}});let n=r[2][r[19].query]&&lt(r);return{c(){e=v("div"),ce(t.$$.fragment),s=G(),n&&n.c(),l=G(),this.h()},l(i){e=g(i,"DIV",{class:!0});var c=p(e);de(t.$$.fragment,c),s=H(c),n&&n.l(c),l=H(c),c.forEach(d),this.h()},h(){m(e,"class","fr-col loader-parent")},m(i,c){B(i,e,c),ue(t,e,null),h(e,s),n&&n.m(e,null),h(e,l),a=!0},p(i,c){const b={};c&12&&(b.show=i[3][i[19].query]&&i[2][i[19].query]),t.$set(b),i[2][i[19].query]?n?(n.p(i,c),c&4&&O(n,1)):(n=lt(i),n.c(),O(n,1),n.m(e,l)):n&&(we(),R(n,1,1,()=>{n=null}),Ee())},i(i){a||(O(t.$$.fragment,i),O(n),a=!0)},o(i){R(t.$$.fragment,i),R(n),a=!1},d(i){i&&d(e),fe(t),n&&n.d()}}}function Yt(r){let e,t;return e=new Ht({props:{words:r[2][r[19].query]&&r[9](r[2][r[19].query].data)}}),{c(){ce(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,l){ue(e,s,l),t=!0},p(s,l){const a={};l&4&&(a.words=s[2][s[19].query]&&s[9](s[2][s[19].query].data)),e.$set(a)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){fe(e,s)}}}function Zt(r){let e,t;return e=new Rt({props:{height:r[19].height,type:r[19].type,data:r[2][r[19].query]&&r[8](r[2][r[19].query].data,r[19].query,r[2][r[19].query].type,r[19].chartType,r[19].fill),options:x({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:r[5][r[19].query]},legend:{display:r[19].legend}}},r[2][r[19].query]&&r[2][r[19].query].type==="time_series"?he(x({},r[10]),{scales:{x:{type:"time"}}}):he(x({},r[10]),{indexAxis:r[19].indexAxis||"x"}))}}),{c(){ce(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,l){ue(e,s,l),t=!0},p(s,l){const a={};l&4&&(a.data=s[2][s[19].query]&&s[8](s[2][s[19].query].data,s[19].query,s[2][s[19].query].type,s[19].chartType,s[19].fill)),l&4&&(a.options=x({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:s[5][s[19].query]},legend:{display:s[19].legend}}},s[2][s[19].query]&&s[2][s[19].query].type==="time_series"?he(x({},s[10]),{scales:{x:{type:"time"}}}):he(x({},s[10]),{indexAxis:s[19].indexAxis||"x"}))),e.$set(a)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){fe(e,s)}}}function nt(r){let e,t,s,l,a,n,i;t=new Ze({props:{show:r[3][r[19].query]&&r[2][r[19].query]}});const c=[Zt,Yt],b=[];function y(f,_){return f[19].type!=="wordCloud"?0:1}return l=y(r),a=b[l]=c[l](r),{c(){e=v("div"),ce(t.$$.fragment),s=G(),a.c(),n=G(),this.h()},l(f){e=g(f,"DIV",{class:!0});var _=p(e);de(t.$$.fragment,_),s=H(_),a.l(_),n=H(_),_.forEach(d),this.h()},h(){m(e,"class","fr-col-12 fr-col-md-6 loader-parent")},m(f,_){B(f,e,_),ue(t,e,null),h(e,s),b[l].m(e,null),h(e,n),i=!0},p(f,_){const E={};_&12&&(E.show=f[3][f[19].query]&&f[2][f[19].query]),t.$set(E),a.p(f,_)},i(f){i||(O(t.$$.fragment,f),O(a),i=!0)},o(f){R(t.$$.fragment,f),R(a),i=!1},d(f){f&&d(e),fe(t),b[l].d()}}}function $t(r){let e,t,s,l,a,n,i,c,b,y,f,_,E,S,I,P,z,Y,j,D,A,M,w,C,N,F,K,U,Q,qe,se=r[6],L=[];for(let u=0;u<se.length;u+=1)L[u]=st(tt(r,se,u));let re=r[7],T=[];for(let u=0;u<re.length;u+=1)T[u]=rt(et(r,re,u));let Z=r[4].filter(ot),k=[];for(let u=0;u<Z.length;u+=1)k[u]=at(xe(r,Z,u));const ct=u=>R(k[u],1,1,()=>{k[u]=null});let $=r[4].filter(it),V=[];for(let u=0;u<$.length;u+=1)V[u]=nt($e(r,$,u));const dt=u=>R(V[u],1,1,()=>{V[u]=null});return{c(){e=v("div"),t=v("div"),s=v("div"),l=v("div"),a=v("div"),n=v("div"),i=v("div"),c=v("div"),b=v("div"),y=v("label"),f=ee("Plage de dates"),_=G(),E=v("select");for(let u=0;u<L.length;u+=1)L[u].c();S=G(),I=v("div"),P=v("label"),z=ee("Environnement"),Y=G(),j=v("select");for(let u=0;u<T.length;u+=1)T[u].c();D=G(),A=v("div"),M=v("div"),w=v("div");for(let u=0;u<k.length;u+=1)k[u].c();C=G(),N=v("div"),F=v("div"),K=v("div");for(let u=0;u<V.length;u+=1)V[u].c();this.h()},l(u){e=g(u,"DIV",{class:!0});var q=p(e);t=g(q,"DIV",{class:!0});var o=p(t);s=g(o,"DIV",{class:!0});var J=p(s);l=g(J,"DIV",{class:!0});var De=p(l);a=g(De,"DIV",{class:!0});var le=p(a);n=g(le,"DIV",{class:!0});var Ie=p(n);i=g(Ie,"DIV",{class:!0});var ke=p(i);c=g(ke,"DIV",{class:!0});var _e=p(c);b=g(_e,"DIV",{class:!0});var me=p(b);y=g(me,"LABEL",{class:!0,for:!0});var Ve=p(y);f=te(Ve,"Plage de dates"),Ve.forEach(d),_=H(me),E=g(me,"SELECT",{id:!0,class:!0});var ze=p(E);for(let W=0;W<L.length;W+=1)L[W].l(ze);ze.forEach(d),me.forEach(d),S=H(_e),I=g(_e,"DIV",{class:!0});var ve=p(I);P=g(ve,"LABEL",{class:!0,for:!0});var Ce=p(P);z=te(Ce,"Environnement"),Ce.forEach(d),Y=H(ve),j=g(ve,"SELECT",{id:!0,class:!0});var Se=p(j);for(let W=0;W<T.length;W+=1)T[W].l(Se);Se.forEach(d),ve.forEach(d),_e.forEach(d),ke.forEach(d),Ie.forEach(d),D=H(le),A=g(le,"DIV",{class:!0});var Ae=p(A);M=g(Ae,"DIV",{class:!0});var Fe=p(M);w=g(Fe,"DIV",{class:!0});var Oe=p(w);for(let W=0;W<k.length;W+=1)k[W].l(Oe);Oe.forEach(d),Fe.forEach(d),Ae.forEach(d),C=H(le),N=g(le,"DIV",{class:!0});var Pe=p(N);F=g(Pe,"DIV",{class:!0});var Me=p(F);K=g(Me,"DIV",{class:!0});var je=p(K);for(let W=0;W<V.length;W+=1)V[W].l(je);je.forEach(d),Me.forEach(d),Pe.forEach(d),le.forEach(d),De.forEach(d),J.forEach(d),o.forEach(d),q.forEach(d),this.h()},h(){m(y,"class","fr-label"),m(y,"for","date"),m(E,"id","date"),m(E,"class","fr-select"),r[0]===void 0&&Ge(()=>r[11].call(E)),m(b,"class","fr-col-6"),m(P,"class","fr-label"),m(P,"for","env"),m(j,"id","env"),m(j,"class","fr-select"),r[1]===void 0&&Ge(()=>r[12].call(j)),m(I,"class","fr-col-6"),m(c,"class","fr-grid-row fr-grid-row--gutters"),m(i,"class","fr-container fr-container--fluid"),m(n,"class","fr-col-12"),m(w,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(M,"class","fr-container fr-container--fluid"),m(A,"class","fr-col-12"),m(K,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(F,"class","fr-container fr-container--fluid"),m(N,"class","fr-col-12"),m(a,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(l,"class","fr-container fr-container--fluid"),m(s,"class","fr-col-12"),m(t,"class","fr-grid-row fr-grid-row--gutters"),m(e,"class","fr-container fr-container--fluid")},m(u,q){B(u,e,q),h(e,t),h(t,s),h(s,l),h(l,a),h(a,n),h(n,i),h(i,c),h(c,b),h(b,y),h(y,f),h(b,_),h(b,E);for(let o=0;o<L.length;o+=1)L[o].m(E,null);ye(E,r[0]),h(c,S),h(c,I),h(I,P),h(P,z),h(I,Y),h(I,j);for(let o=0;o<T.length;o+=1)T[o].m(j,null);ye(j,r[1]),h(a,D),h(a,A),h(A,M),h(M,w);for(let o=0;o<k.length;o+=1)k[o].m(w,null);h(a,C),h(a,N),h(N,F),h(F,K);for(let o=0;o<V.length;o+=1)V[o].m(K,null);U=!0,Q||(qe=[He(E,"change",r[11]),He(j,"change",r[12])],Q=!0)},p(u,[q]){if(q&64){se=u[6];let o;for(o=0;o<se.length;o+=1){const J=tt(u,se,o);L[o]?L[o].p(J,q):(L[o]=st(J),L[o].c(),L[o].m(E,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=se.length}if(q&65&&ye(E,u[0]),q&128){re=u[7];let o;for(o=0;o<re.length;o+=1){const J=et(u,re,o);T[o]?T[o].p(J,q):(T[o]=rt(J),T[o].c(),T[o].m(j,null))}for(;o<T.length;o+=1)T[o].d(1);T.length=re.length}if(q&130&&ye(j,u[1]),q&60){Z=u[4].filter(ot);let o;for(o=0;o<Z.length;o+=1){const J=xe(u,Z,o);k[o]?(k[o].p(J,q),O(k[o],1)):(k[o]=at(J),k[o].c(),O(k[o],1),k[o].m(w,null))}for(we(),o=Z.length;o<k.length;o+=1)ct(o);Ee()}if(q&1852){$=u[4].filter(it);let o;for(o=0;o<$.length;o+=1){const J=$e(u,$,o);V[o]?(V[o].p(J,q),O(V[o],1)):(V[o]=nt(J),V[o].c(),O(V[o],1),V[o].m(K,null))}for(we(),o=$.length;o<V.length;o+=1)dt(o);Ee()}},i(u){if(!U){for(let q=0;q<Z.length;q+=1)O(k[q]);for(let q=0;q<$.length;q+=1)O(V[q]);U=!0}},o(u){k=k.filter(Boolean);for(let q=0;q<k.length;q+=1)R(k[q]);V=V.filter(Boolean);for(let q=0;q<V.length;q+=1)R(V[q]);U=!1},d(u){u&&d(e),be(L,u),be(T,u),be(k,u),be(V,u),Q=!1,Ft(qe)}}}let xt=30;const ot=r=>["number","date"].includes(r.type),it=r=>!["number","date"].includes(r.type);function es(r,e,t){const s=[{query:"total_docs",type:"number"},{query:"last_decision_date",type:"date"},{query:"api_requests_number",type:"number"},{query:"decision_uniq_number",type:"number"},{query:"pods_number",type:"number"},{query:"api_requests_date_histogram",type:"line",legend:!0},{query:"top_words",type:"wordCloud",height:"400px",col:12,legend:!1},{query:"requests_ip_source",type:"pie",legend:!0},{query:"piste",type:"bar",legend:!1},{query:"errors_histogram",type:"bar",indexAxis:"y",legend:!1},{query:"latencty_date_histogram",type:"line",fill:!0,legend:!0},{query:"cpu_date_histogram",type:"line",fill:!0,legend:!0},{query:"mem_date_histogram",type:"line",fill:!0,legend:!0},{query:"bandwidth_date_histogram",type:"line",legend:!1}],l={total_docs:"D\xE9cisions index\xE9es",last_decision_date:"Date de la derni\xE8re d\xE9cision",api_requests_number:"Appels API",api_requests_date_histogram:"Requ\xEAtes",decision_uniq_number:"D\xE9cisions consult\xE9es",errors_histogram:"Erreurs http",requests_ip_source:"Canal d'appel",piste:"Utilisateurs Piste",latencty_date_histogram:"Latence",cpu_date_histogram:"CPU %",mem_date_histogram:"M\xE9moire",bandwidth_date_histogram:"R\xE9seau (octets)",top_words:"Recherches",pods_number:"Conteneurs"},a=[{label:"Dernier jour",start:"now-1d",end:"now",step:"1h"},{label:"Derni\xE8re heure",start:"now-1h",end:"now",step:"1m"},{label:"Derni\xE8re semaine",start:"now-7d",end:"now",step:"4h"},{label:"Dernier mois",start:"now-30d",end:"now",step:"1d"},{label:"Depuis le d\xE9but",start:"2020-01-01T00:00:00",end:"now",step:"1d"}],n=[{label:"Production",name:"production"},{label:"Secours",name:"secours"},{label:"Recette",name:"recette"}];let i=a[0],c=n[0],b={},y={};const f=(D,A,M,w,C)=>{if(M==="time_series"){let N=0,F={};return D.forEach(U=>{Object.keys(U).forEach(Q=>{Q!=="date"&&(F[Q]=!0)})}),F=Object.keys(F),F.includes("Mem.total")&&(F=["Mem.used.min","Mem.used.mean","Mem.used.max","Mem.total"]),{datasets:F.map(U=>({data:D.map(Q=>{if(Q[U])return{x:new Date(Q.date),y:Q[U]}}),label:U,borderColor:z[N++],borderWidth:C?0:void 0,fill:C?"origin":void 0,backgroundColor:C?`#000091${9-2*N}${9-2*N}`:void 0}))}}else{let N=Object.keys(D).sort((F,K)=>D[K]-D[F]);return{datasets:[{data:N.map(F=>D[F]),backgroundColor:z,borderWidth:0,label:l[A]}],labels:N.map(F=>S(F))}}},_=D=>Object.keys(D).filter(M=>M.length>1).map(M=>({text:M,count:D[M]})),E={"80.87.226.10":"courdecassation.fr","185.24.185.49":"piste.gouv.fr"},S=D=>E[D]||D,I={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},interaction:{mode:"index"},hover:{intersect:!1},elements:{point:{radius:0},line:{tension:.15}}},P={"F-blue-soft":"#5770BE","N-orange-dark":"#E18863","E-green-soft":"#00AC8C","L-yellow-dark":"#FDCF41","Q-brown":"#A26859","J-pink-light":"#FFC29E","$blue-france":"#000091","$red-marianne":"#E1000F","A-green-warm":"#958B62","B-green-light":"#91AE4F","C-green-warm":"#169B62","G-blue-dark":"#484D7A","H-pink-soft":"#FF8D7E","I-pink-dark":"#D08A77","K-yellow-medium":"#FFE800","M-orange-medium":"#FF9940","O-orange-soft":"#FF6F4C","P-purple":"#7D4E5B"},z=Object.keys(P).map(D=>P[D]);function Y(){i=Ke(this),t(0,i),t(6,a)}function j(){c=Ke(this),t(1,c),t(7,n)}return r.$$.update=()=>{r.$$.dirty&3&&(i||c)&&s.forEach(D=>{t(3,y[D.query]=!0,y),fetch(new Request(`https://monitor.judilibre.io/stats?query=${D.query}&date_start=${i.start}&date_end=${i.end}&date_interval=${i.step}&env=${c.name}&size=${xt}`,{method:"GET",referer:"https://stats.judilibre.io",mode:"cors"})).then(A=>{if(A.ok)return A.json().then(M=>{t(2,b[D.query]=M[D.query],b),t(3,y[D.query]=!1,y)})})})},[i,c,b,y,s,l,a,n,f,_,I,Y,j]}class ts extends ae{constructor(e){super();ne(this,e,es,$t,oe,{})}}function ss(r){let e,t,s,l,a,n,i;return n=new ts({}),{c(){e=G(),t=v("section"),s=v("div"),l=v("div"),a=v("div"),ce(n.$$.fragment),this.h()},l(c){Pt('[data-svelte="svelte-9qr2em"]',document.head).forEach(d),e=H(c),t=g(c,"SECTION",{});var y=p(t);s=g(y,"DIV",{class:!0});var f=p(s);l=g(f,"DIV",{class:!0});var _=p(l);a=g(_,"DIV",{class:!0});var E=p(a);de(n.$$.fragment,E),E.forEach(d),_.forEach(d),f.forEach(d),y.forEach(d),this.h()},h(){document.title="API Judilibre - statistiques",m(a,"class","fr-col-12 fr-mt-2w"),m(l,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(s,"class","fr-container")},m(c,b){B(c,e,b),B(c,t,b),h(t,s),h(s,l),h(l,a),ue(n,a,null),i=!0},p:X,i(c){i||(O(n.$$.fragment,c),i=!0)},o(c){R(n.$$.fragment,c),i=!1},d(c){c&&d(e),c&&d(t),fe(n)}}}const as=!0;class ns extends ae{constructor(e){super();ne(this,e,null,ss,oe,{})}}export{ns as default,as as prerender};

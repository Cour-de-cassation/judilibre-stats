var Ue=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var De=(t,e,l)=>e in t?Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,J=(t,e)=>{for(var l in e||(e={}))Ze.call(e,l)&&De(t,l,e[l]);if(we)for(var l of we(e))xe.call(e,l)&&De(t,l,e[l]);return t},ce=(t,e)=>Xe(t,Ye(e));import{S as se,i as ae,s as ne,H as Ie,e as v,k as A,c as g,a as y,d as f,n as L,b,f as S,F as h,I as Ve,J as $e,K as ke,x as O,u as T,E as je,G as U,L as x,M as et,W as tt,N as lt,O as rt,P as st,t as X,g as Y,j as ue,m as fe,o as de,v as he,r as _e,w as pe,Q as Ce,R as ie,T as Oe,U as oe,V as at,h as nt,X as Se,Y as it}from"../chunks/vendor-309c7e4b.js";const ot=t=>({}),Te=t=>({}),ct=t=>({}),Pe=t=>({});function ut(t){let e,l,r,n,i,a;const c=t[1].title,u=Ie(c,t,t[0],Pe),I=t[1].desc,_=Ie(I,t,t[0],Te);return{c(){e=v("div"),l=v("div"),r=v("h4"),u&&u.c(),n=A(),i=v("p"),_&&_.c(),this.h()},l(p){e=g(p,"DIV",{class:!0});var d=y(e);l=g(d,"DIV",{class:!0});var D=y(l);r=g(D,"H4",{class:!0});var z=y(r);u&&u.l(z),z.forEach(f),n=L(D),i=g(D,"P",{class:!0});var H=y(i);_&&_.l(H),H.forEach(f),D.forEach(f),d.forEach(f),this.h()},h(){b(r,"class","fr-tile__title"),b(i,"class","rf-tile__desc fr-mt-0 fr-mb-0"),b(l,"class","fr-tile__body"),b(e,"class","fr-tile")},m(p,d){S(p,e,d),h(e,l),h(l,r),u&&u.m(r,null),h(l,n),h(l,i),_&&_.m(i,null),a=!0},p(p,[d]){u&&u.p&&(!a||d&1)&&Ve(u,c,p,p[0],a?ke(c,p[0],d,ct):$e(p[0]),Pe),_&&_.p&&(!a||d&1)&&Ve(_,I,p,p[0],a?ke(I,p[0],d,ot):$e(p[0]),Te)},i(p){a||(O(u,p),O(_,p),a=!0)},o(p){T(u,p),T(_,p),a=!1},d(p){p&&f(e),u&&u.d(p),_&&_.d(p)}}}function ft(t,e,l){let{$$slots:r={},$$scope:n}=e;return t.$$set=i=>{"$$scope"in i&&l(0,n=i.$$scope)},[n,r]}class dt extends se{constructor(e){super();ae(this,e,ft,ut,ne,{})}}function ht(t){let e;return{c(){e=v("canvas"),this.h()},l(l){e=g(l,"CANVAS",{style:!0}),y(e).forEach(f),this.h()},h(){je(e,"height",t[0])},m(l,r){S(l,e,r),t[5](e)},p(l,[r]){r&1&&je(e,"height",l[0])},i:U,o:U,d(l){l&&f(e),t[5](null)}}}function _t(t,e,l){let{type:r="line"}=e,{data:n}=e,{height:i="150px"}=e,{options:a={}}=e;x.register(...et),x.register(tt,lt),x.register(rt),x.defaults.font.family='"Marianne"';let c,u,I;function _(){I=c.getContext("2d"),u&&u.destroy(),u=new x(I,{type:r,data:n,options:a})}function p(d){st[d?"unshift":"push"](()=>{c=d,l(1,c)})}return t.$$set=d=>{"type"in d&&l(2,r=d.type),"data"in d&&l(3,n=d.data),"height"in d&&l(0,i=d.height),"options"in d&&l(4,a=d.options)},t.$$.update=()=>{t.$$.dirty&8&&n&&_()},[i,c,r,n,a,p]}class pt extends se{constructor(e){super();ae(this,e,_t,ht,ne,{type:2,data:3,height:0,options:4})}}function Ae(t,e,l){const r=t.slice();return r[15]=e[l],r[17]=l,r}function Le(t,e,l){const r=t.slice();return r[18]=e[l],r}function Ne(t,e,l){const r=t.slice();return r[21]=e[l],r}function Be(t,e,l){const r=t.slice();return r[24]=e[l],r}function Re(t){let e,l=t[24].label+"",r,n,i;return{c(){e=v("option"),r=X(l),n=A(),this.h()},l(a){e=g(a,"OPTION",{});var c=y(e);r=Y(c,l),n=L(c),c.forEach(f),this.h()},h(){e.__value=i=t[24],e.value=e.__value},m(a,c){S(a,e,c),h(e,r),h(e,n)},p:U,d(a){a&&f(e)}}}function ze(t){let e,l=t[21].label+"",r,n,i;return{c(){e=v("option"),r=X(l),n=A(),this.h()},l(a){e=g(a,"OPTION",{});var c=y(e);r=Y(c,l),n=L(c),c.forEach(f),this.h()},h(){e.__value=i=t[21],e.value=e.__value},m(a,c){S(a,e,c),h(e,r),h(e,n)},p:U,d(a){a&&f(e)}}}function He(t){let e,l;return e=new dt({props:{$$slots:{desc:[vt],title:[mt]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,n){de(e,r,n),l=!0},p(r,n){const i={};n&134217732&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){l||(O(e.$$.fragment,r),l=!0)},o(r){T(e.$$.fragment,r),l=!1},d(r){he(e,r)}}}function mt(t){let e,l=t[2][t[18]].data+"",r;return{c(){e=v("span"),r=X(l),this.h()},l(n){e=g(n,"SPAN",{slot:!0});var i=y(e);r=Y(i,l),i.forEach(f),this.h()},h(){b(e,"slot","title")},m(n,i){S(n,e,i),h(e,r)},p(n,i){i&4&&l!==(l=n[2][n[18]].data+"")&&nt(r,l)},d(n){n&&f(e)}}}function vt(t){let e,l=t[18]+"",r;return{c(){e=v("span"),r=X(l),this.h()},l(n){e=g(n,"SPAN",{slot:!0});var i=y(e);r=Y(i,l),i.forEach(f),this.h()},h(){b(e,"slot","desc")},m(n,i){S(n,e,i),h(e,r)},p:U,d(n){n&&f(e)}}}function We(t){let e,l,r=t[2][t[18]]&&He(t);return{c(){e=v("div"),r&&r.c(),this.h()},l(n){e=g(n,"DIV",{class:!0});var i=y(e);r&&r.l(i),i.forEach(f),this.h()},h(){b(e,"class","fr-col-4")},m(n,i){S(n,e,i),r&&r.m(e,null),l=!0},p(n,i){n[2][n[18]]?r?(r.p(n,i),i&4&&O(r,1)):(r=He(n),r.c(),O(r,1),r.m(e,null)):r&&(_e(),T(r,1,1,()=>{r=null}),pe())},i(n){l||(O(r),l=!0)},o(n){T(r),l=!1},d(n){n&&f(e),r&&r.d()}}}function Ge(t){let e,l,r,n,i;return l=new pt({props:{height:t[15].height||"150px",type:t[15].type,data:t[2][t[15].query]&&J({},t[6](t[2][t[15].query].data,t[15].query,t[2][t[15].query].type,t[15].chartType)),options:J({plugins:{title:{display:!0,text:t[15].query},legend:{display:t[2][t[15].query]&&t[2][t[15].query].type==="time_series"}}},t[2][t[15].query]&&t[2][t[15].query].type==="time_series"?ce(J({},t[7]),{scales:{x:{type:"time"}}}):t[7])}}),{c(){e=v("div"),ue(l.$$.fragment),r=A(),this.h()},l(a){e=g(a,"DIV",{class:!0});var c=y(e);fe(l.$$.fragment,c),r=L(c),c.forEach(f),this.h()},h(){b(e,"class",n="fr-col-"+(t[15].col||6))},m(a,c){S(a,e,c),de(l,e,null),h(e,r),i=!0},p(a,c){const u={};c&4&&(u.data=a[2][a[15].query]&&J({},a[6](a[2][a[15].query].data,a[15].query,a[2][a[15].query].type,a[15].chartType))),c&4&&(u.options=J({plugins:{title:{display:!0,text:a[15].query},legend:{display:a[2][a[15].query]&&a[2][a[15].query].type==="time_series"}}},a[2][a[15].query]&&a[2][a[15].query].type==="time_series"?ce(J({},a[7]),{scales:{x:{type:"time"}}}):a[7])),l.$set(u)},i(a){i||(O(l.$$.fragment,a),i=!0)},o(a){T(l.$$.fragment,a),i=!1},d(a){a&&f(e),he(l)}}}function gt(t){let e,l,r,n,i,a,c,u,I,_,p,d,D,z,H,E,W,P,G,V,N,Z,B,R,K=t[4],$=[];for(let o=0;o<K.length;o+=1)$[o]=Re(Be(t,K,o));let Q=t[5],k=[];for(let o=0;o<Q.length;o+=1)k[o]=ze(Ne(t,Q,o));let M=t[3].filter(Me).map(Fe),q=[];for(let o=0;o<M.length;o+=1)q[o]=We(Le(t,M,o));const Ke=o=>T(q[o],1,1,()=>{q[o]=null});let F=t[3].filter(Je),w=[];for(let o=0;o<F.length;o+=1)w[o]=Ge(Ae(t,F,o));const Qe=o=>T(w[o],1,1,()=>{w[o]=null});return{c(){e=v("div"),l=v("div"),r=v("div"),n=v("div"),i=v("div"),a=v("div"),c=v("label"),u=X("Plage de dates"),I=A(),_=v("select");for(let o=0;o<$.length;o+=1)$[o].c();p=A(),d=v("div"),D=v("label"),z=X("Environnement"),H=A(),E=v("select");for(let o=0;o<k.length;o+=1)k[o].c();W=A(),P=v("div"),G=v("div"),V=v("div");for(let o=0;o<q.length;o+=1)q[o].c();N=A();for(let o=0;o<w.length;o+=1)w[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var m=y(e);l=g(m,"DIV",{class:!0});var s=y(l);r=g(s,"DIV",{class:!0});var C=y(r);n=g(C,"DIV",{class:!0});var me=y(n);i=g(me,"DIV",{class:!0});var ee=y(i);a=g(ee,"DIV",{class:!0});var te=y(a);c=g(te,"LABEL",{class:!0,for:!0});var ve=y(c);u=Y(ve,"Plage de dates"),ve.forEach(f),I=L(te),_=g(te,"SELECT",{id:!0,class:!0});var ge=y(_);for(let j=0;j<$.length;j+=1)$[j].l(ge);ge.forEach(f),te.forEach(f),p=L(ee),d=g(ee,"DIV",{class:!0});var le=y(d);D=g(le,"LABEL",{class:!0,for:!0});var ye=y(D);z=Y(ye,"Environnement"),ye.forEach(f),H=L(le),E=g(le,"SELECT",{id:!0,class:!0});var be=y(E);for(let j=0;j<k.length;j+=1)k[j].l(be);be.forEach(f),le.forEach(f),ee.forEach(f),me.forEach(f),C.forEach(f),W=L(s),P=g(s,"DIV",{class:!0});var Ee=y(P);G=g(Ee,"DIV",{class:!0});var qe=y(G);V=g(qe,"DIV",{class:!0});var re=y(V);for(let j=0;j<q.length;j+=1)q[j].l(re);N=L(re);for(let j=0;j<w.length;j+=1)w[j].l(re);re.forEach(f),qe.forEach(f),Ee.forEach(f),s.forEach(f),m.forEach(f),this.h()},h(){b(c,"class","fr-label"),b(c,"for","date"),b(_,"id","date"),b(_,"class","fr-select"),t[0]===void 0&&Ce(()=>t[8].call(_)),b(a,"class","fr-col-6"),b(D,"class","fr-label"),b(D,"for","cluster"),b(E,"id","cluster"),b(E,"class","fr-select"),t[1]===void 0&&Ce(()=>t[9].call(E)),b(d,"class","fr-col-6"),b(i,"class","fr-grid-row fr-grid-row--gutters"),b(n,"class","fr-container fr-container--fluid"),b(r,"class","fr-col-12"),b(V,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),b(G,"class","fr-container fr-container--fluid"),b(P,"class","fr-col-12"),b(l,"class","fr-grid-row fr-grid-row--gutters"),b(e,"class","fr-container fr-container--fluid")},m(o,m){S(o,e,m),h(e,l),h(l,r),h(r,n),h(n,i),h(i,a),h(a,c),h(c,u),h(a,I),h(a,_);for(let s=0;s<$.length;s+=1)$[s].m(_,null);ie(_,t[0]),h(i,p),h(i,d),h(d,D),h(D,z),h(d,H),h(d,E);for(let s=0;s<k.length;s+=1)k[s].m(E,null);ie(E,t[1]),h(l,W),h(l,P),h(P,G),h(G,V);for(let s=0;s<q.length;s+=1)q[s].m(V,null);h(V,N);for(let s=0;s<w.length;s+=1)w[s].m(V,null);Z=!0,B||(R=[Oe(_,"change",t[8]),Oe(E,"change",t[9])],B=!0)},p(o,[m]){if(m&16){K=o[4];let s;for(s=0;s<K.length;s+=1){const C=Be(o,K,s);$[s]?$[s].p(C,m):($[s]=Re(C),$[s].c(),$[s].m(_,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=K.length}if(m&17&&ie(_,o[0]),m&32){Q=o[5];let s;for(s=0;s<Q.length;s+=1){const C=Ne(o,Q,s);k[s]?k[s].p(C,m):(k[s]=ze(C),k[s].c(),k[s].m(E,null))}for(;s<k.length;s+=1)k[s].d(1);k.length=Q.length}if(m&34&&ie(E,o[1]),m&12){M=o[3].filter(Me).map(Fe);let s;for(s=0;s<M.length;s+=1){const C=Le(o,M,s);q[s]?(q[s].p(C,m),O(q[s],1)):(q[s]=We(C),q[s].c(),O(q[s],1),q[s].m(V,N))}for(_e(),s=M.length;s<q.length;s+=1)Ke(s);pe()}if(m&204){F=o[3].filter(Je);let s;for(s=0;s<F.length;s+=1){const C=Ae(o,F,s);w[s]?(w[s].p(C,m),O(w[s],1)):(w[s]=Ge(C),w[s].c(),O(w[s],1),w[s].m(V,null))}for(_e(),s=F.length;s<w.length;s+=1)Qe(s);pe()}},i(o){if(!Z){for(let m=0;m<M.length;m+=1)O(q[m]);for(let m=0;m<F.length;m+=1)O(w[m]);Z=!0}},o(o){q=q.filter(Boolean);for(let m=0;m<q.length;m+=1)T(q[m]);w=w.filter(Boolean);for(let m=0;m<w.length;m+=1)T(w[m]);Z=!1},d(o){o&&f(e),oe($,o),oe(k,o),oe(q,o),oe(w,o),B=!1,at(R)}}}let yt=50;const Me=t=>t.type==="number",Fe=t=>t.query,Je=t=>t.type!=="number";function bt(t,e,l){const r=[{query:"api_requests_number",type:"number"},{query:"api_requests_date_histogram",type:"line"},{query:"decision_uniq_number",type:"number"},{query:"errors_histogram",type:"bar"},{query:"requests_ip_source",type:"bar"},{query:"latencty_date_histogram",type:"line"},{query:"pods_number",type:"number"},{query:"cpu_date_histogram",type:"line"},{query:"mem_date_histogram",type:"line"},{query:"bandwidth_date_histogram",type:"line"},{query:"top_words",type:"bar",height:"200px",col:12}],n=[{label:"Dernier jour",start:"now-1d",end:"now",step:"30m"},{label:"Derni\xE8re heure",start:"now-1h",end:"now",step:"2m"},{label:"Derni\xE8re semaine",start:"now-7d",end:"now",step:"12h"},{label:"Dernier mois",start:"now-30d",end:"now",step:"1d"},{label:"Depuis le d\xE9but",start:"2020-01-01T00:00:00",end:"now",step:"1d"}];let i=n[0];const a=[{label:"Production",name:"judilibre-scw-prod-par2"},{label:"Secours",name:"judilibre-scw-prod-par1"},{label:"Recette",name:"judilibre-scw-dev-par1"}];let c=a[0],u={};const I=(E,W,P,G)=>{if(P==="time_series"){let V=0,N={};return E.forEach(B=>{Object.keys(B).forEach(R=>{R!=="date"&&(N[R]=!0)})}),N=Object.keys(N),{datasets:N.map(B=>({data:E.map(R=>{if(R[B])return{x:new Date(R.date),y:R[B]}}),label:B,borderColor:D[V++]}))}}else return{datasets:[{data:Object.keys(E).map(V=>E[V]),backgroundColor:D[0],label:W}],labels:Object.keys(E).map(V=>p(V))}},_={"80.87.226.10":"courdecassation.fr","185.24.185.49":"piste.gouv.fr"},p=E=>_[E]||E,d={responsive:!0,animation:{duration:0},interaction:{mode:"index"},hover:{intersect:!1},elements:{point:{radius:0},line:{tension:0}}},D=["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"];function z(){i=Se(this),l(0,i),l(4,n)}function H(){c=Se(this),l(1,c),l(5,a)}return t.$$.update=()=>{t.$$.dirty&3&&(i||c)&&r.forEach(E=>{fetch(new Request(`https://monitor.judilibre.io/stats?query=${E.query}&date_start=${i.start}&date_end=${i.end}&date_interval=${i.step}&cluster=${c.name}&size=${yt}`,{method:"GET",referer:"https://stats.judilibre.io",mode:"cors",referrerPolicy:"unsafe-url"})).then(W=>{if(W.ok)return W.json().then(P=>{l(2,u[E.query]=P[E.query],u)})})})},[i,c,u,r,n,a,I,d,z,H]}class Et extends se{constructor(e){super();ae(this,e,bt,gt,ne,{})}}function qt(t){let e,l,r,n,i,a,c;return a=new Et({}),{c(){e=A(),l=v("section"),r=v("div"),n=v("div"),i=v("div"),ue(a.$$.fragment),this.h()},l(u){it('[data-svelte="svelte-1anpopb"]',document.head).forEach(f),e=L(u),l=g(u,"SECTION",{});var _=y(l);r=g(_,"DIV",{class:!0});var p=y(r);n=g(p,"DIV",{class:!0});var d=y(n);i=g(d,"DIV",{class:!0});var D=y(i);fe(a.$$.fragment,D),D.forEach(f),d.forEach(f),p.forEach(f),_.forEach(f),this.h()},h(){document.title="Home",b(i,"class","fr-col-12 fr-mt-2w"),b(n,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),b(r,"class","fr-container")},m(u,I){S(u,e,I),S(u,l,I),h(l,r),h(r,n),h(n,i),de(a,i,null),c=!0},p:U,i(u){c||(O(a.$$.fragment,u),c=!0)},o(u){T(a.$$.fragment,u),c=!1},d(u){u&&f(e),u&&f(l),he(a)}}}const It=!0;class Vt extends se{constructor(e){super();ae(this,e,null,qt,ne,{})}}export{Vt as default,It as prerender};

var ut=Object.defineProperty,ft=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var Le=(r,e,t)=>e in r?ut(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fe=(r,e)=>{for(var t in e||(e={}))_t.call(e,t)&&Le(r,t,e[t]);if(Me)for(var t of Me(e))mt.call(e,t)&&Le(r,t,e[t]);return r},ye=(r,e)=>ft(r,ht(e));import{S as se,i as re,s as le,H as Te,e as v,k as J,c as g,a as p,d,n as G,b as m,f as N,F as h,I as We,J as Be,K as Ne,x as F,u as L,E as ae,G as H,L as ve,M as vt,N as gt,O as pt,P as yt,Q as bt,R as wt,T as Et,U as Dt,V as qt,W as It,X as kt,Y as Vt,Z as zt,_ as Ct,$ as St,a0 as Ft,a1 as Re,a2 as Je,t as ne,g as oe,j as ie,m as ce,o as de,v as ue,r as be,w as we,a3 as Ge,a4 as ge,a5 as He,a6 as pe,a7 as At,h as Ot,a8 as Ke,a9 as Pt}from"../chunks/vendor-1002784e.js";const jt=r=>({}),Qe=r=>({}),Mt=r=>({}),Ue=r=>({});function Lt(r){let e,t,s,l,a,n;const i=r[1].title,c=Te(i,r,r[0],Ue),w=r[1].desc,b=Te(w,r,r[0],Qe);return{c(){e=v("div"),t=v("div"),s=v("h4"),c&&c.c(),l=J(),a=v("p"),b&&b.c(),this.h()},l(f){e=g(f,"DIV",{class:!0});var _=p(e);t=g(_,"DIV",{class:!0});var E=p(t);s=g(E,"H4",{class:!0});var S=p(s);c&&c.l(S),S.forEach(d),l=G(E),a=g(E,"P",{class:!0});var C=p(a);b&&b.l(C),C.forEach(d),E.forEach(d),_.forEach(d),this.h()},h(){m(s,"class","fr-tile__title"),m(a,"class","rf-tile__desc fr-mt-0 fr-mb-0"),m(t,"class","fr-tile__body"),m(e,"class","fr-tile")},m(f,_){N(f,e,_),h(e,t),h(t,s),c&&c.m(s,null),h(t,l),h(t,a),b&&b.m(a,null),n=!0},p(f,[_]){c&&c.p&&(!n||_&1)&&We(c,i,f,f[0],n?Ne(i,f[0],_,Mt):Be(f[0]),Ue),b&&b.p&&(!n||_&1)&&We(b,w,f,f[0],n?Ne(w,f[0],_,jt):Be(f[0]),Qe)},i(f){n||(F(c,f),F(b,f),n=!0)},o(f){L(c,f),L(b,f),n=!1},d(f){f&&d(e),c&&c.d(f),b&&b.d(f)}}}function Tt(r,e,t){let{$$slots:s={},$$scope:l}=e;return r.$$set=a=>{"$$scope"in a&&t(0,l=a.$$scope)},[l,s]}class Wt extends se{constructor(e){super();re(this,e,Tt,Lt,le,{})}}function Bt(r){let e;return{c(){e=v("canvas"),this.h()},l(t){e=g(t,"CANVAS",{style:!0}),p(e).forEach(d),this.h()},h(){ae(e,"height",r[0]||"250px")},m(t,s){N(t,e,s),r[5](e)},p(t,[s]){s&1&&ae(e,"height",t[0]||"250px")},i:H,o:H,d(t){t&&d(e),r[5](null)}}}function Nt(r,e,t){let{type:s="line"}=e,{data:l}=e,{height:a}=e,{options:n={}}=e;ve.register(...vt),ve.register(gt),ve.defaults.font.family='"Marianne"';let i,c,w;function b(){w=i.getContext("2d"),c?(c.data=l,c.update()):c=new ve(w,{type:s,data:l,options:n})}function f(_){pt[_?"unshift":"push"](()=>{i=_,t(1,i)})}return r.$$set=_=>{"type"in _&&t(2,s=_.type),"data"in _&&t(3,l=_.data),"height"in _&&t(0,a=_.height),"options"in _&&t(4,n=_.options)},r.$$.update=()=>{r.$$.dirty&8&&l&&b()},[a,i,s,l,n,f]}class Rt extends se{constructor(e){super();re(this,e,Nt,Bt,le,{type:2,data:3,height:0,options:4})}}function Jt(r){let e;return{c(){e=v("div"),this.h()},l(t){e=g(t,"DIV",{id:!0,style:!0,class:!0}),p(e).forEach(d),this.h()},h(){m(e,"id","wordcloud"),ae(e,"height","100%"),ae(e,"max-height","250px"),ae(e,"display","block"),ae(e,"margin","auto"),m(e,"class","svelte-1ig73ck")},m(t,s){N(t,e,s)},p:H,i:H,o:H,d(t){t&&d(e)}}}function Gt(r,e,t){const s=yt(),l={schemeCategory10:Et,schemeAccent:Dt,schemeDark2:qt,schemePaired:It,schemePastel1:kt,schemePastel2:Vt,schemeSet1:zt,schemeSet2:Ct,schemeSet3:St,schemeTableau10:Ft};let{words:a}=e,{height:n=900}=e,{width:i=1600}=e,{font:c='"Marianne"'}=e,{maxFontSize:w=30}=e,{scheme:b="schemeTableau10"}=e,{padding:f=4}=e,_=1,E="",S;const C=bt(l[b]),A=y=>s("click",y),z=y=>s("mouseover",y),Y=y=>s("mouseout",y),O=y=>s("mousemove",y);let q;const T=y=>{Re("#wordcloud").append("svg").attr("viewBox",`0 0 ${i} ${n}`).attr("width","100%").attr("height","100%").classed("svg-content-responsive",!0).append("g").attr("transform","translate("+q.size()[0]/2+","+q.size()[1]/2+")").selectAll("text").data(y).enter().append("text").style("font-size",I=>I.size+"px").style("font-weight",I=>I.size*800/_).style("font-family",c).style("fill",(I,U)=>C(U)).attr("text-anchor","middle").attr("transform",I=>"translate("+[I.x,I.y]+")rotate("+I.rotate+")").text(I=>I.text).on("click",A).on("mouseover",z).on("mouseout",Y).on("mousemove",O)};return r.$$set=y=>{"words"in y&&t(0,a=y.words),"height"in y&&t(1,n=y.height),"width"in y&&t(2,i=y.width),"font"in y&&t(3,c=y.font),"maxFontSize"in y&&t(4,w=y.maxFontSize),"scheme"in y&&t(5,b=y.scheme),"padding"in y&&t(6,f=y.padding)},r.$$.update=()=>{r.$$.dirty&2015&&a&&JSON.stringify(a)!==E&&(q&&Re("#wordcloud").select("svg").remove(),t(8,E=JSON.stringify(a)),t(9,S=a.reduce((y,I)=>y.count<I.count?y.count:I.count)),t(10,q=wt().size([i,n]).words(a).padding(f).rotate(()=>~~(Math.random()*2)*90).font(c).fontSize(y=>{const I=Math.floor(y.count/S*w);return t(7,_=Math.max(_,I)),I}).on("end",T)),q.start())},[a,n,i,c,w,b,f,_,E,S,q]}class Ht extends se{constructor(e){super();re(this,e,Gt,Jt,le,{words:0,height:1,width:2,font:3,maxFontSize:4,scheme:5,padding:6})}}function Xe(r){let e,t,s,l,a,n,i,c,w,b,f,_,E,S;return{c(){e=v("div"),t=v("div"),s=v("div"),l=v("div"),a=v("div"),n=v("div"),i=v("div"),c=v("div"),w=v("div"),b=v("div"),f=v("div"),_=v("div"),E=v("div"),S=v("div"),this.h()},l(C){e=g(C,"DIV",{class:!0});var A=p(e);t=g(A,"DIV",{class:!0});var z=p(t);s=g(z,"DIV",{class:!0}),p(s).forEach(d),l=g(z,"DIV",{class:!0}),p(l).forEach(d),a=g(z,"DIV",{class:!0}),p(a).forEach(d),n=g(z,"DIV",{class:!0}),p(n).forEach(d),i=g(z,"DIV",{class:!0}),p(i).forEach(d),c=g(z,"DIV",{class:!0}),p(c).forEach(d),w=g(z,"DIV",{class:!0}),p(w).forEach(d),b=g(z,"DIV",{class:!0}),p(b).forEach(d),f=g(z,"DIV",{class:!0}),p(f).forEach(d),_=g(z,"DIV",{class:!0}),p(_).forEach(d),E=g(z,"DIV",{class:!0}),p(E).forEach(d),S=g(z,"DIV",{class:!0}),p(S).forEach(d),z.forEach(d),A.forEach(d),this.h()},h(){m(s,"class","svelte-zmyo9f"),m(l,"class","svelte-zmyo9f"),m(a,"class","svelte-zmyo9f"),m(n,"class","svelte-zmyo9f"),m(i,"class","svelte-zmyo9f"),m(c,"class","svelte-zmyo9f"),m(w,"class","svelte-zmyo9f"),m(b,"class","svelte-zmyo9f"),m(f,"class","svelte-zmyo9f"),m(_,"class","svelte-zmyo9f"),m(E,"class","svelte-zmyo9f"),m(S,"class","svelte-zmyo9f"),m(t,"class","lds-spinner svelte-zmyo9f"),m(e,"class","load-content svelte-zmyo9f")},m(C,A){N(C,e,A),h(e,t),h(t,s),h(t,l),h(t,a),h(t,n),h(t,i),h(t,c),h(t,w),h(t,b),h(t,f),h(t,_),h(t,E),h(t,S)},d(C){C&&d(e)}}}function Kt(r){let e,t=r[0]&&Xe();return{c(){e=v("div"),t&&t.c(),this.h()},l(s){e=g(s,"DIV",{class:!0});var l=p(e);t&&t.l(l),l.forEach(d),this.h()},h(){m(e,"class","svelte-zmyo9f"),Je(e,"load-container",r[0])},m(s,l){N(s,e,l),t&&t.m(e,null)},p(s,[l]){s[0]?t||(t=Xe(),t.c(),t.m(e,null)):t&&(t.d(1),t=null),l&1&&Je(e,"load-container",s[0])},i:H,o:H,d(s){s&&d(e),t&&t.d()}}}function Qt(r,e,t){let{show:s=!1}=e;return r.$$set=l=>{"show"in l&&t(0,s=l.show)},[s]}class Ye extends se{constructor(e){super();re(this,e,Qt,Kt,le,{show:0})}}function Ze(r,e,t){const s=r.slice();return s[19]=e[t],s[21]=t,s}function $e(r,e,t){const s=r.slice();return s[22]=e[t],s}function xe(r,e,t){const s=r.slice();return s[25]=e[t],s}function et(r,e,t){const s=r.slice();return s[28]=e[t],s}function tt(r){let e,t=r[28].label+"",s,l,a;return{c(){e=v("option"),s=ne(t),l=J(),this.h()},l(n){e=g(n,"OPTION",{});var i=p(e);s=oe(i,t),l=G(i),i.forEach(d),this.h()},h(){e.__value=a=r[28],e.value=e.__value},m(n,i){N(n,e,i),h(e,s),h(e,l)},p:H,d(n){n&&d(e)}}}function st(r){let e,t=r[25].label+"",s,l,a;return{c(){e=v("option"),s=ne(t),l=J(),this.h()},l(n){e=g(n,"OPTION",{});var i=p(e);s=oe(i,t),l=G(i),i.forEach(d),this.h()},h(){e.__value=a=r[25],e.value=e.__value},m(n,i){N(n,e,i),h(e,s),h(e,l)},p:H,d(n){n&&d(e)}}}function rt(r){let e,t;return e=new Wt({props:{$$slots:{desc:[Xt],title:[Ut]},$$scope:{ctx:r}}}),{c(){ie(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,l){de(e,s,l),t=!0},p(s,l){const a={};l[0]&4|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function Ut(r){let e,t=r[2][r[22]].data+"",s;return{c(){e=v("span"),s=ne(t),this.h()},l(l){e=g(l,"SPAN",{slot:!0});var a=p(e);s=oe(a,t),a.forEach(d),this.h()},h(){m(e,"slot","title")},m(l,a){N(l,e,a),h(e,s)},p(l,a){a[0]&4&&t!==(t=l[2][l[22]].data+"")&&Ot(s,t)},d(l){l&&d(e)}}}function Xt(r){let e,t=r[5][r[22]]+"",s;return{c(){e=v("span"),s=ne(t),this.h()},l(l){e=g(l,"SPAN",{slot:!0});var a=p(e);s=oe(a,t),a.forEach(d),this.h()},h(){m(e,"slot","desc")},m(l,a){N(l,e,a),h(e,s)},p:H,d(l){l&&d(e)}}}function lt(r){let e,t,s,l,a;t=new Ye({props:{show:r[3][r[22]]&&r[2][r[22]]}});let n=r[2][r[22]]&&rt(r);return{c(){e=v("div"),ie(t.$$.fragment),s=J(),n&&n.c(),l=J(),this.h()},l(i){e=g(i,"DIV",{class:!0});var c=p(e);ce(t.$$.fragment,c),s=G(c),n&&n.l(c),l=G(c),c.forEach(d),this.h()},h(){m(e,"class","fr-col loader-parent")},m(i,c){N(i,e,c),de(t,e,null),h(e,s),n&&n.m(e,null),h(e,l),a=!0},p(i,c){const w={};c[0]&12&&(w.show=i[3][i[22]]&&i[2][i[22]]),t.$set(w),i[2][i[22]]?n?(n.p(i,c),c[0]&4&&F(n,1)):(n=rt(i),n.c(),F(n,1),n.m(e,l)):n&&(be(),L(n,1,1,()=>{n=null}),we())},i(i){a||(F(t.$$.fragment,i),F(n),a=!0)},o(i){L(t.$$.fragment,i),L(n),a=!1},d(i){i&&d(e),ue(t),n&&n.d()}}}function Yt(r){let e,t;return e=new Ht({props:{words:r[2][r[19].query]&&r[9](r[2][r[19].query].data)}}),{c(){ie(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,l){de(e,s,l),t=!0},p(s,l){const a={};l[0]&4&&(a.words=s[2][s[19].query]&&s[9](s[2][s[19].query].data)),e.$set(a)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function Zt(r){let e,t;return e=new Rt({props:{height:r[19].height,type:r[19].type,data:r[2][r[19].query]&&r[8](r[2][r[19].query].data,r[19].query,r[2][r[19].query].type,r[19].chartType,r[19].fill),options:fe({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:r[5][r[19].query]},legend:{display:r[19].legend}}},r[2][r[19].query]&&r[2][r[19].query].type==="time_series"?ye(fe({},r[10]),{scales:{x:{type:"time"}}}):r[10])}}),{c(){ie(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,l){de(e,s,l),t=!0},p(s,l){const a={};l[0]&4&&(a.data=s[2][s[19].query]&&s[8](s[2][s[19].query].data,s[19].query,s[2][s[19].query].type,s[19].chartType,s[19].fill)),l[0]&4&&(a.options=fe({plugins:{datalabels:{color:"#ffffff"},title:{display:!0,text:s[5][s[19].query]},legend:{display:s[19].legend}}},s[2][s[19].query]&&s[2][s[19].query].type==="time_series"?ye(fe({},s[10]),{scales:{x:{type:"time"}}}):s[10])),e.$set(a)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){ue(e,s)}}}function at(r){let e,t,s,l,a,n,i;t=new Ye({props:{show:r[3][r[19].query]&&r[2][r[19].query]}});const c=[Zt,Yt],w=[];function b(f,_){return f[19].type!=="wordCloud"?0:1}return l=b(r),a=w[l]=c[l](r),{c(){e=v("div"),ie(t.$$.fragment),s=J(),a.c(),n=J(),this.h()},l(f){e=g(f,"DIV",{class:!0});var _=p(e);ce(t.$$.fragment,_),s=G(_),a.l(_),n=G(_),_.forEach(d),this.h()},h(){m(e,"class","fr-col-12 fr-col-md-6 loader-parent")},m(f,_){N(f,e,_),de(t,e,null),h(e,s),w[l].m(e,null),h(e,n),i=!0},p(f,_){const E={};_[0]&12&&(E.show=f[3][f[19].query]&&f[2][f[19].query]),t.$set(E),a.p(f,_)},i(f){i||(F(t.$$.fragment,f),F(a),i=!0)},o(f){L(t.$$.fragment,f),L(a),i=!1},d(f){f&&d(e),ue(t),w[l].d()}}}function $t(r){let e,t,s,l,a,n,i,c,w,b,f,_,E,S,C,A,z,Y,O,q,T,y,I,U,W,R,X,K,Q,Ee,x=r[6],P=[];for(let u=0;u<x.length;u+=1)P[u]=tt(et(r,x,u));let ee=r[7],j=[];for(let u=0;u<ee.length;u+=1)j[u]=st(xe(r,ee,u));let Z=r[4].filter(nt).map(ot),k=[];for(let u=0;u<Z.length;u+=1)k[u]=lt($e(r,Z,u));const ct=u=>L(k[u],1,1,()=>{k[u]=null});let $=r[4].filter(it),V=[];for(let u=0;u<$.length;u+=1)V[u]=at(Ze(r,$,u));const dt=u=>L(V[u],1,1,()=>{V[u]=null});return{c(){e=v("div"),t=v("div"),s=v("div"),l=v("div"),a=v("div"),n=v("div"),i=v("div"),c=v("div"),w=v("div"),b=v("label"),f=ne("Plage de dates"),_=J(),E=v("select");for(let u=0;u<P.length;u+=1)P[u].c();S=J(),C=v("div"),A=v("label"),z=ne("Environnement"),Y=J(),O=v("select");for(let u=0;u<j.length;u+=1)j[u].c();q=J(),T=v("div"),y=v("div"),I=v("div");for(let u=0;u<k.length;u+=1)k[u].c();U=J(),W=v("div"),R=v("div"),X=v("div");for(let u=0;u<V.length;u+=1)V[u].c();this.h()},l(u){e=g(u,"DIV",{class:!0});var D=p(e);t=g(D,"DIV",{class:!0});var o=p(t);s=g(o,"DIV",{class:!0});var B=p(s);l=g(B,"DIV",{class:!0});var De=p(l);a=g(De,"DIV",{class:!0});var te=p(a);n=g(te,"DIV",{class:!0});var qe=p(n);i=g(qe,"DIV",{class:!0});var Ie=p(i);c=g(Ie,"DIV",{class:!0});var he=p(c);w=g(he,"DIV",{class:!0});var _e=p(w);b=g(_e,"LABEL",{class:!0,for:!0});var ke=p(b);f=oe(ke,"Plage de dates"),ke.forEach(d),_=G(_e),E=g(_e,"SELECT",{id:!0,class:!0});var Ve=p(E);for(let M=0;M<P.length;M+=1)P[M].l(Ve);Ve.forEach(d),_e.forEach(d),S=G(he),C=g(he,"DIV",{class:!0});var me=p(C);A=g(me,"LABEL",{class:!0,for:!0});var ze=p(A);z=oe(ze,"Environnement"),ze.forEach(d),Y=G(me),O=g(me,"SELECT",{id:!0,class:!0});var Ce=p(O);for(let M=0;M<j.length;M+=1)j[M].l(Ce);Ce.forEach(d),me.forEach(d),he.forEach(d),Ie.forEach(d),qe.forEach(d),q=G(te),T=g(te,"DIV",{class:!0});var Se=p(T);y=g(Se,"DIV",{class:!0});var Fe=p(y);I=g(Fe,"DIV",{class:!0});var Ae=p(I);for(let M=0;M<k.length;M+=1)k[M].l(Ae);Ae.forEach(d),Fe.forEach(d),Se.forEach(d),U=G(te),W=g(te,"DIV",{class:!0});var Oe=p(W);R=g(Oe,"DIV",{class:!0});var Pe=p(R);X=g(Pe,"DIV",{class:!0});var je=p(X);for(let M=0;M<V.length;M+=1)V[M].l(je);je.forEach(d),Pe.forEach(d),Oe.forEach(d),te.forEach(d),De.forEach(d),B.forEach(d),o.forEach(d),D.forEach(d),this.h()},h(){m(b,"class","fr-label"),m(b,"for","date"),m(E,"id","date"),m(E,"class","fr-select"),r[0]===void 0&&Ge(()=>r[11].call(E)),m(w,"class","fr-col-6"),m(A,"class","fr-label"),m(A,"for","cluster"),m(O,"id","cluster"),m(O,"class","fr-select"),r[1]===void 0&&Ge(()=>r[12].call(O)),m(C,"class","fr-col-6"),m(c,"class","fr-grid-row fr-grid-row--gutters"),m(i,"class","fr-container fr-container--fluid"),m(n,"class","fr-col-12"),m(I,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(y,"class","fr-container fr-container--fluid"),m(T,"class","fr-col-12"),m(X,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(R,"class","fr-container fr-container--fluid"),m(W,"class","fr-col-12"),m(a,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(l,"class","fr-container fr-container--fluid"),m(s,"class","fr-col-12"),m(t,"class","fr-grid-row fr-grid-row--gutters"),m(e,"class","fr-container fr-container--fluid")},m(u,D){N(u,e,D),h(e,t),h(t,s),h(s,l),h(l,a),h(a,n),h(n,i),h(i,c),h(c,w),h(w,b),h(b,f),h(w,_),h(w,E);for(let o=0;o<P.length;o+=1)P[o].m(E,null);ge(E,r[0]),h(c,S),h(c,C),h(C,A),h(A,z),h(C,Y),h(C,O);for(let o=0;o<j.length;o+=1)j[o].m(O,null);ge(O,r[1]),h(a,q),h(a,T),h(T,y),h(y,I);for(let o=0;o<k.length;o+=1)k[o].m(I,null);h(a,U),h(a,W),h(W,R),h(R,X);for(let o=0;o<V.length;o+=1)V[o].m(X,null);K=!0,Q||(Ee=[He(E,"change",r[11]),He(O,"change",r[12])],Q=!0)},p(u,D){if(D[0]&64){x=u[6];let o;for(o=0;o<x.length;o+=1){const B=et(u,x,o);P[o]?P[o].p(B,D):(P[o]=tt(B),P[o].c(),P[o].m(E,null))}for(;o<P.length;o+=1)P[o].d(1);P.length=x.length}if(D[0]&65&&ge(E,u[0]),D[0]&128){ee=u[7];let o;for(o=0;o<ee.length;o+=1){const B=xe(u,ee,o);j[o]?j[o].p(B,D):(j[o]=st(B),j[o].c(),j[o].m(O,null))}for(;o<j.length;o+=1)j[o].d(1);j.length=ee.length}if(D[0]&130&&ge(O,u[1]),D[0]&60){Z=u[4].filter(nt).map(ot);let o;for(o=0;o<Z.length;o+=1){const B=$e(u,Z,o);k[o]?(k[o].p(B,D),F(k[o],1)):(k[o]=lt(B),k[o].c(),F(k[o],1),k[o].m(I,null))}for(be(),o=Z.length;o<k.length;o+=1)ct(o);we()}if(D[0]&1852){$=u[4].filter(it);let o;for(o=0;o<$.length;o+=1){const B=Ze(u,$,o);V[o]?(V[o].p(B,D),F(V[o],1)):(V[o]=at(B),V[o].c(),F(V[o],1),V[o].m(X,null))}for(be(),o=$.length;o<V.length;o+=1)dt(o);we()}},i(u){if(!K){for(let D=0;D<Z.length;D+=1)F(k[D]);for(let D=0;D<$.length;D+=1)F(V[D]);K=!0}},o(u){k=k.filter(Boolean);for(let D=0;D<k.length;D+=1)L(k[D]);V=V.filter(Boolean);for(let D=0;D<V.length;D+=1)L(V[D]);K=!1},d(u){u&&d(e),pe(P,u),pe(j,u),pe(k,u),pe(V,u),Q=!1,At(Ee)}}}let xt=30;const nt=r=>r.type==="number",ot=r=>r.query,it=r=>r.type!=="number";function es(r,e,t){const s=[{query:"api_requests_number",type:"number"},{query:"decision_uniq_number",type:"number"},{query:"pods_number",type:"number"},{query:"api_requests_date_histogram",type:"line",legend:!0},{query:"top_words",type:"wordCloud",height:"400px",col:12,legend:!1},{query:"requests_ip_source",type:"pie",legend:!0},{query:"latencty_date_histogram",type:"line",fill:!0,legend:!0},{query:"errors_histogram",type:"bar",legend:!1},{query:"cpu_date_histogram",type:"line",fill:!0,legend:!0},{query:"mem_date_histogram",type:"line",fill:!0,legend:!0},{query:"bandwidth_date_histogram",type:"line",legend:!1}],l={api_requests_number:"Appels API",api_requests_date_histogram:"Requ\xEAtes",decision_uniq_number:"D\xE9cisions consult\xE9es",errors_histogram:"Erreurs http",requests_ip_source:"Canal d'appel",latencty_date_histogram:"Latence",cpu_date_histogram:"CPU %",mem_date_histogram:"M\xE9moire",bandwidth_date_histogram:"R\xE9seau (octets)",top_words:"Recherches",pods_number:"Conteneurs"},a=[{label:"Dernier jour",start:"now-1d",end:"now",step:"1h"},{label:"Derni\xE8re heure",start:"now-1h",end:"now",step:"1m"},{label:"Derni\xE8re semaine",start:"now-7d",end:"now",step:"4h"},{label:"Dernier mois",start:"now-30d",end:"now",step:"1d"},{label:"Depuis le d\xE9but",start:"2020-01-01T00:00:00",end:"now",step:"1d"}],n=[{label:"Production",name:"judilibre-scw-prod-par2"},{label:"Secours",name:"judilibre-scw-prod-par1"},{label:"Recette",name:"judilibre-scw-dev-par1"}];let i=a[0],c=n[0],w={},b={};const f=(q,T,y,I,U)=>{if(y==="time_series"){let W=0,R={};return q.forEach(K=>{Object.keys(K).forEach(Q=>{Q!=="date"&&(R[Q]=!0)})}),R=Object.keys(R),R.includes("Mem.total")&&(R=["Mem.used.min","Mem.used.mean","Mem.used.max","Mem.total"]),{datasets:R.map(K=>({data:q.map(Q=>{if(Q[K])return{x:new Date(Q.date),y:Q[K]}}),label:K,borderColor:z[W++],borderWidth:U?0:void 0,fill:U?"origin":void 0,backgroundColor:U?`#000091${9-2*W}${9-2*W}`:void 0}))}}else return{datasets:[{data:Object.keys(q).map(W=>q[W]),backgroundColor:z,borderWidth:0,label:l[T]}],labels:Object.keys(q).map(W=>S(W))}},_=q=>Object.keys(q).filter(y=>y.length>1).map(y=>({text:y,count:q[y]})),E={"80.87.226.10":"courdecassation.fr","185.24.185.49":"piste.gouv.fr"},S=q=>E[q]||q,C={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},interaction:{mode:"index"},hover:{intersect:!1},elements:{point:{radius:0},line:{tension:.15}}},A={"F-blue-soft":"#5770BE","N-orange-dark":"#E18863","E-green-soft":"#00AC8C","L-yellow-dark":"#FDCF41","Q-brown":"#A26859","J-pink-light":"#FFC29E","$blue-france":"#000091","$red-marianne":"#E1000F","A-green-warm":"#958B62","B-green-light":"#91AE4F","C-green-warm":"#169B62","G-blue-dark":"#484D7A","H-pink-soft":"#FF8D7E","I-pink-dark":"#D08A77","K-yellow-medium":"#FFE800","M-orange-medium":"#FF9940","O-orange-soft":"#FF6F4C","P-purple":"#7D4E5B"},z=Object.keys(A).map(q=>A[q]);function Y(){i=Ke(this),t(0,i),t(6,a)}function O(){c=Ke(this),t(1,c),t(7,n)}return r.$$.update=()=>{r.$$.dirty[0]&3&&(i||c)&&s.forEach(q=>{t(3,b[q.query]=!0,b),fetch(new Request(`https://monitor.judilibre.io/stats?query=${q.query}&date_start=${i.start}&date_end=${i.end}&date_interval=${i.step}&cluster=${c.name}&size=${xt}`,{method:"GET",referer:"https://stats.judilibre.io",mode:"cors"})).then(T=>{if(T.ok)return T.json().then(y=>{t(2,w[q.query]=y[q.query],w),t(3,b[q.query]=!1,b)})})})},[i,c,w,b,s,l,a,n,f,_,C,Y,O]}class ts extends se{constructor(e){super();re(this,e,es,$t,le,{},null,[-1,-1])}}function ss(r){let e,t,s,l,a,n,i;return n=new ts({}),{c(){e=J(),t=v("section"),s=v("div"),l=v("div"),a=v("div"),ie(n.$$.fragment),this.h()},l(c){Pt('[data-svelte="svelte-9qr2em"]',document.head).forEach(d),e=G(c),t=g(c,"SECTION",{});var b=p(t);s=g(b,"DIV",{class:!0});var f=p(s);l=g(f,"DIV",{class:!0});var _=p(l);a=g(_,"DIV",{class:!0});var E=p(a);ce(n.$$.fragment,E),E.forEach(d),_.forEach(d),f.forEach(d),b.forEach(d),this.h()},h(){document.title="API Judilibre - statistiques",m(a,"class","fr-col-12 fr-mt-2w"),m(l,"class","fr-grid-row fr-grid-row--gutters fr-grid-row--center"),m(s,"class","fr-container")},m(c,w){N(c,e,w),N(c,t,w),h(t,s),h(s,l),h(l,a),de(n,a,null),i=!0},p:H,i(c){i||(F(n.$$.fragment,c),i=!0)},o(c){L(n.$$.fragment,c),i=!1},d(c){c&&d(e),c&&d(t),ue(n)}}}const as=!0;class ns extends se{constructor(e){super();re(this,e,null,ss,le,{})}}export{ns as default,as as prerender};
